<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>üî• ÂêçÂâçÁõ∏ÊÄß„ÉÜ„Çπ„Éà | Áõ∏ÊÄß„Éë„Éº„Çª„É≥„ÉàË®∫Êñ≠ - „Éê„Ç§„É©„É´„ÉÜ„Çπ„Éà</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="üíò ÂêçÂâç„ÇíÂÖ•Âäõ„Åô„Çã„Å†„Åë„ÅßÂÆåÊàêÔºÅÁõ∏ÊÄß„Éë„Éº„Çª„É≥„Éà„Å®Ê•Ω„Åó„ÅÑÂàÜÊûêÁµêÊûú„Çí„Ç≤„ÉÉ„Éà„Åó„Çà„ÅÜ„ÄÇÂèãÈÅî„Å®„Ç∑„Çß„Ç¢„Åó„Å¶ÊØîËºÉ„Åô„ÇãÊ•Ω„Åó„Åï„Åæ„ÅßÔºÅ‰ªä„Åô„Åê„ÉÜ„Çπ„Éà„Åó„Å¶SNS„ÅßËá™ÊÖ¢„Åó„Çà„ÅÜ ‚ú®">
<link rel="canonical" href="https://tests.mahalohana-bruce.com/compat-pick/ja/">

<!-- hreflang -->
<link rel="alternate" hreflang="ko" href="https://tests.mahalohana-bruce.com/compat-pick/ko/">
<link rel="alternate" hreflang="ja" href="https://tests.mahalohana-bruce.com/compat-pick/ja/">
<link rel="alternate" hreflang="en" href="https://tests.mahalohana-bruce.com/compat-pick/en/">
<link rel="alternate" hreflang="x-default" href="https://tests.mahalohana-bruce.com/compat-pick/ko/">

<!-- OGP -->
<meta property="og:type" content="website">
<meta property="og:title" content="üî• ÂêçÂâçÁõ∏ÊÄß„ÉÜ„Çπ„Éà | ‰ªä„Åô„ÅêÁ¢∫Ë™ç„Åó„Å¶„Åø„Çà„ÅÜÔºÅ">
<meta property="og:description" content="üíò ÂêçÂâç„ÇíÂÖ•Âäõ„Åô„Çã„Å†„Åë„ÅßÁõ∏ÊÄß„Éë„Éº„Çª„É≥„ÉàÂÆåÊàêÔºÅÂèãÈÅî„Å®ÊØîËºÉ„Åó„Å¶SNS„Åß„Ç∑„Çß„Ç¢„Åô„ÇãÊ•Ω„Åó„Åï„Åæ„Åß ‚ú® ‰ªä„Åô„Åê„ÇÑ„Å£„Å¶„Åø„Çà„ÅÜÔºÅ">
<meta property="og:url" content="https://tests.mahalohana-bruce.com/compat-pick/ja/">
<meta property="og:image" content="https://tests.mahalohana-bruce.com/compat-pick/og-ja.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="üî• ÂêçÂâçÁõ∏ÊÄß„ÉÜ„Çπ„Éà | ‰ªä„Åô„ÅêÁ¢∫Ë™ç„Åó„Å¶„Åø„Çà„ÅÜÔºÅ">
<meta name="twitter:description" content="üíò ÂêçÂâç„ÇíÂÖ•Âäõ„Åô„Çã„Å†„Åë„ÅßÁõ∏ÊÄß„Éë„Éº„Çª„É≥„ÉàÂÆåÊàêÔºÅÂèãÈÅî„Å®ÊØîËºÉ„Åô„ÇãÊ•Ω„Åó„Åï„Åæ„Åß ‚ú®">
<meta name="twitter:image" content="https://tests.mahalohana-bruce.com/compat-pick/og-ja.png">
<meta name="twitter:site" content="@tests_mahalohana">

<link rel="icon" href="https://tests.mahalohana-bruce.com/favicon.png" type="image/png">

<style>
:root{
  --bg:#F8FAFC; --card:#FFFFFF; --text:#1E293B; --muted:#64748B;
  --brand:#E11D48; --brand2:#7C3AED; --accent:#F59E0B; --line:#06c755;
  --glow:rgba(225,29,72,0.15); --success:#10B981;
  --soft-bg:#FEF7FF; --gradient-bg:#FAFBFF;
}
*{box-sizing:border-box}
body{
  margin:0; color:var(--text); overflow-x:hidden;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans JP", "Yu Gothic", "Hiragino Sans", system-ui, sans-serif;
  background: linear-gradient(135deg, var(--gradient-bg) 0%, var(--soft-bg) 50%, #FFF1F2 100%);
  position:relative;
}
body::before{
  content:''; position:fixed; top:0; left:0; right:0; bottom:0; z-index:-1;
  background: 
    radial-gradient(circle at 20% 80%, rgba(225,29,72,0.05) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(124,58,237,0.08) 0%, transparent 50%);
  animation: soft-float 12s ease-in-out infinite alternate;
}
@keyframes soft-float {
  0% { opacity: 0.4; transform: translateY(0px); }
  100% { opacity: 0.6; transform: translateY(-10px); }
}
header{
  position:sticky; top:0; z-index:10;
  background:rgba(255,255,255,0.95);
  backdrop-filter:blur(20px); border-bottom:1px solid rgba(225,29,72,.1);
  box-shadow: 0 2px 20px rgba(225,29,72,0.08);
}
.wrap{max-width:960px; margin:0 auto; padding:16px}
.top{display:flex; align-items:center; justify-content:space-between; gap:12px}
.brand{display:flex; align-items:center; gap:10px}
.logo{width:36px; height:36px; border-radius:11px; 
  background:linear-gradient(135deg, var(--brand), var(--brand2)); 
  box-shadow:0 6px 20px var(--glow);
  animation: pulse-glow 3s ease-in-out infinite;
}
@keyframes pulse-glow {
  0%, 100% { box-shadow:0 6px 20px var(--glow); }
  50% { box-shadow:0 8px 30px rgba(255,107,107,0.5); }
}
.title{font-weight:800}
main{padding:24px 16px 80px}
.card{
  background:var(--card); border:1px solid rgba(225,29,72,.1);
  border-radius:24px; padding:24px; 
  box-shadow:0 8px 32px rgba(225,29,72,.08), inset 0 1px 0 rgba(255,255,255,.8);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.card:hover{
  transform: translateY(-2px);
  box-shadow:0 12px 48px rgba(225,29,72,.12);
}
.hero{display:grid; grid-template-columns:1.2fr 0.8fr; gap:32px; align-items:center}
.hero-content{text-align:center}
@media (max-width: 860px){ .hero{grid-template-columns:1fr; gap:20px} }
h1{margin:.1em 0 .3em; font-size:clamp(28px, 4.5vw, 48px); 
  text-align:center; font-weight:900;
  background:linear-gradient(135deg, var(--brand), var(--brand2), var(--accent));
  -webkit-background-clip:text; background-clip:text; color:transparent;
  text-shadow:0 0 30px var(--glow);
  animation: text-shine 3s ease-in-out infinite alternate;
}
@keyframes text-shine {
  0% { filter: brightness(1); }
  100% { filter: brightness(1.2); }
}
.muted{color:var(--muted)}
.pill{
  display:inline-flex; gap:8px; align-items:center; font-size:13px; font-weight:800; color:#fff;
  background:linear-gradient(90deg, var(--brand), var(--brand2)); padding:8px 16px; border-radius:999px;
  box-shadow:0 4px 15px var(--glow); animation: pill-float 4s ease-in-out infinite;
  position:relative; overflow:hidden;
}
.pill::before{
  content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  animation: pill-shine 2s linear infinite;
}
@keyframes pill-float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-3px); }
}
@keyframes pill-shine {
  0% { left: -100%; }
  100% { left: 100%; }
}
.row{display:grid; grid-template-columns:1fr 1fr; gap:20px; align-items:end; margin-bottom:20px;}
input[type=text]{
  width:100%; padding:16px 20px; border-radius:16px; 
  border:2px solid rgba(225,29,72,.15); font-size:16px;
  background:rgba(248,250,252,0.8); color:var(--text);
  transition: all 0.3s ease;
}
input[type=text]:focus{
  outline:none; border-color:var(--brand);
  box-shadow:0 0 0 3px var(--glow); transform:scale(1.02);
  background:white;
}
input[type=text]::placeholder{
  color:var(--muted);
}
.controls{display:flex; flex-wrap:wrap; gap:10px; margin-top:10px}
.modebtn{
  padding:10px 12px; border-radius:12px; background:rgba(248,250,252,0.9); color:var(--text); cursor:pointer; font-weight:700; border:1px solid rgba(225,29,72,0.3); transition:all 0.3s ease;
}
.modebtn:hover{
  transform:translateY(-1px); box-shadow:0 4px 12px rgba(225,29,72,.1);
  background:white;
}
button.primary{
  appearance:none; border:none; cursor:pointer; padding:16px 24px; border-radius:16px; 
  font-weight:900; letter-spacing:.3px; font-size:16px;
  background:linear-gradient(135deg, var(--brand), var(--brand2)); color:#fff; 
  box-shadow:0 10px 30px var(--glow);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position:relative; overflow:hidden;
}
button.primary:disabled{
  opacity:0.7; cursor:not-allowed; transform:none !important;
}
button.primary.loading{
  pointer-events:none;
}
button.primary.loading::after{
  content:''; position:absolute; top:50%; left:50%; width:20px; height:20px;
  margin:-10px 0 0 -10px; border:2px solid transparent; border-top:2px solid #fff;
  border-radius:50%; animation:spin 1s linear infinite;
}
@keyframes spin{
  0%{transform:rotate(0deg);}
  100%{transform:rotate(360deg);}
}
button.primary:hover{
  transform: translateY(-2px) scale(1.05);
  box-shadow:0 15px 40px rgba(255,107,107,0.4);
}
button.primary:active{
  transform: translateY(0) scale(1.02);
}
button.primary::before{
  content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s;
}
button.primary:hover::before{
  left:100%;
}
.result h2{font-size:clamp(22px, 2.6vw, 28px); margin:.2em 0}
.badge{display:inline-flex; gap:8px; align-items:center; padding:8px 12px; border-radius:999px; font-size:12px; font-weight:800; background:rgba(255,107,107,0.1); color:var(--brand); border:1px solid rgba(255,107,107,0.3); backdrop-filter:blur(5px);}
.grid2{display:grid; grid-template-columns:1fr 1fr; gap:14px}
@media (max-width: 720px){ 
  .container {max-width: 100%; padding: 12px;}
  .row{grid-template-columns:1fr; gap:12px;}
  .hero{grid-template-columns:1fr; gap:16px; text-align:center;}
  .example-card{margin-top:20px;}
  input[type=text]{font-size:16px; padding:14px 16px;}
  button.primary{padding:14px 24px; font-size:16px;}
  #result {padding:20px 12px !important;}
  #result > div[style*="flex"] {flex-direction:column !important;}
  #result a, #result button {min-width:200px; text-align:center; margin-bottom:8px;}
  .share{justify-content:center;}
}

@media (max-width: 480px) {
  .container {
    padding: 8px;
    max-width: 100%;
  }
  
  .header-controls {
    top: 4px;
    right: 4px;
    padding: 4px;
    gap: 4px;
  }
  
  .lang-btn {
    padding: 4px 8px;
    font-size: 10px;
  }
  
  .theme-toggle {
    width: 32px;
    height: 32px;
    font-size: 12px;
  }

  h1 {
    font-size: 1.6rem;
    line-height: 1.2;
  }

  .subtitle {
    font-size: 0.85rem;
    margin-bottom: 12px;
    padding: 0 8px;
  }
  
  .pill {
    font-size: 11px;
    padding: 6px 12px;
  }
  
  input[type=text] {
    font-size: 16px;
    padding: 12px 14px;
  }
  
  .card {
    padding: 16px;
    border-radius: 16px;
  }
  
  .example-card {
    padding: 20px;
  }
  
  #result {
    padding: 16px 8px !important;
  }
  
  #result .badge {
    font-size: 14px;
    padding: 6px 12px;
  }
  
  #result #score {
    font-size: clamp(48px, 10vw, 72px) !important;
  }
  
  #result #type {
    font-size: clamp(16px, 4vw, 20px) !important;
  }
  
  #result #comment {
    font-size: 16px !important;
  }
}
.share{display:flex; gap:10px; flex-wrap:wrap}
.share a, .share button{padding:12px 16px; border-radius:12px; font-weight:800; transition:all 0.2s ease;}
.share a:hover, .share button:hover{transform:translateY(-2px) scale(1.05);}
.share a{background:#fff; border:1px solid rgba(0,0,0,.12); text-decoration:none; color:var(--text)}
.share a.line{border-color:#06c755}
.share a.x{border-color:#111}
.share a.fb{border-color:#1877f2}
footer{color:var(--muted); text-align:center; padding:40px 0; background:rgba(248,250,252,0.8); backdrop-filter:blur(10px);}
.hidden{display:none}
small.hint{color:var(--muted); display:block; margin-top:6px}
.table{width:100%; border-collapse:separate; border-spacing:0; font-size:14px}
.table th, .table td{padding:10px 8px; border-bottom:1px solid rgba(0,0,0,.06)}
.table th{color:#64748b; text-align:left}
.toast{
  position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
  background:linear-gradient(135deg,var(--brand),var(--brand2)); color:#fff; padding:12px 20px; border-radius:15px; z-index:9999; font-weight:800; box-shadow:0 10px 30px var(--glow); animation:toast-in 0.3s ease;
}
.toast.error{
  background:linear-gradient(135deg,#dc2626,#b91c1c); box-shadow:0 10px 30px rgba(220,38,38,0.3);
}
.toast.success{
  background:linear-gradient(135deg,#059669,#047857); box-shadow:0 10px 30px rgba(5,150,105,0.3);
}
@keyframes toast-in {
  from { opacity:0; transform:translateX(-50%) translateY(20px); }
  to { opacity:1; transform:translateX(-50%) translateY(0); }
}
@keyframes gentle-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
@keyframes result-shimmer {
  0% { transform:translateX(-100%); }
  100% { transform:translateX(100%); }
}
@keyframes pulse-btn {
  0%, 100% { transform: scale(1); box-shadow:0 10px 30px var(--glow); }
  50% { transform: scale(1.05); box-shadow:0 15px 40px rgba(255,107,107,0.4); }
}
</style>

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-45VSGEM7EZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-45VSGEM7EZ', {
    page_title: 'Name Chemistry Test JA',
    page_location: window.location.href
  });
</script>

<!-- („Ç™„Éó„Ç∑„Éß„É≥) „Ç¢„Éâ„Çª„É≥„Çπ‰ΩçÁΩÆ„ÅÆ‰æã
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXX" crossorigin="anonymous"></script>
-->

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"Quiz",
  "name":"ÂêçÂâçÁõ∏ÊÄß„ÉÜ„Çπ„Éà",
  "description":"ÂêçÂâç„ÅÆÁõ∏ÊÄß„Çí„ÉÜ„Çπ„Éà„Åó„Å¶Ê•Ω„Åó„ÅÑÁõ∏ÊÄß„Éë„Éº„Çª„É≥„ÉàÁµêÊûú„ÇíÂèñÂæó",
  "url":"https://tests.mahalohana-bruce.com/compat-pick/ja/",
  "applicationCategory":"EntertainmentApplication",
  "inLanguage":"ja",
  "operatingSystem":"All",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "JPY"
  }
}
</script>
  <meta name="mobile-web-app-capable" content="yes">

</head>
<body>
<header>
  <div class="wrap top">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <div class="title" style="background:linear-gradient(135deg,var(--brand),var(--brand2));-webkit-background-clip:text;background-clip:text;color:transparent;">üî• Áõ∏ÊÄß„ÉÜ„Çπ„Éà</div>
        <div style="color:var(--accent); font-size:13px; font-weight:600;">ÂêçÂâç„ÇíÂÖ•Âäõ„Åô„Çã„Å†„Åë„ÅßÁõ∏ÊÄß„Éë„Éº„Çª„É≥„ÉàÂÆåÊàêÔºÅ ‚ú®</div>
      </div>
    </div>
    <nav aria-label="Ë®ÄË™û">
      <a class="muted" href="../ko/index.html">ÌïúÍµ≠Ïñ¥</a> ¬∑
      <a class="muted" href="../ja/index.html" aria-current="page">Êó•Êú¨Ë™û</a> ¬∑
      <a class="muted" href="../en/index.html">English</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <section class="card hero">
    <div class="hero-content">
      <span class="pill">‚ö° 1ÂàÜ„ÅßÈÅãÂëΩÁ¢∫Ë™ç ‚ö° ‰ªäË©±È°åÔºÅ</span>
      <h1>‰ªä„Åô„ÅêÁ¢∫Ë™çÔºÅ<br>„ÅÇ„Å™„Åü„Å®ÁßÅ„ÅÆÈÅãÂëΩ„ÅÆÁõ∏ÊÄß„ÅØÔºü üî•</h1>
      <p class="muted" style="font-size:18px; margin-bottom:32px; text-align:center;">üò± Áúü„ÅÆÊÑõÔºüÊôÇÈñì„ÅÆÁÑ°ÈßÑÔºüÈÅãÂëΩ„ÇíÁü•„ÇãÂøÖË¶Å„Åå„ÅÇ„ÇãÔºÅ <br>üîÆ ‰ªäÊó•„Å†„ÅëÁü•„Çã„Åì„Å®„Åå„Åß„Åç„ÇãÁúüÂÆü...</p>
      <div class="card">
        <div class="row">
          <div>
            <label for="a" style="color:var(--accent); font-size:14px; font-weight:800; display:block; margin-bottom:8px;">üôã‚Äç‚ôÄÔ∏è „ÅÇ„Å™„Åü„ÅÆÂêçÂâç</label>
            <input id="a" type="text" maxlength="16" placeholder="‰æã: „Éñ„É´„Éº„Çπ">
          </div>
          <div>
            <label for="b" style="color:var(--accent); font-size:14px; font-weight:800; display:block; margin-bottom:8px;">üíï Áõ∏Êâã„ÅÆÂêçÂâç</label>
            <input id="b" type="text" maxlength="16" placeholder="‰æã: „Éè„Éä">
          </div>
        </div>
        <div class="controls" style="display:flex; justify-content:center; margin-top:24px; position:relative;">
          <button id="go" class="primary" style="font-size:18px; padding:18px 40px; border-radius:25px; animation: pulse-btn 2s infinite;">üîÆ ‰ªä„Åô„ÅêÈÅãÂëΩÁ¢∫Ë™çÔºÅ üîÆ</button>
        </div>
        <div style="text-align:center; margin-top:16px; padding:12px; background:rgba(225,29,72,0.08); border-radius:12px; border:1px solid rgba(225,29,72,0.2);">
          <small style="color:var(--brand); font-weight:700;">‚ö†Ô∏è Ë≠¶Âëä: „Åì„ÅÆÁµêÊûú„ÇíË¶ã„Åü„ÇâÈÅ©ÂΩì„Å´‰ªò„ÅçÂêà„Åà„Åæ„Åõ„ÇìÔºÅË¶öÊÇü„Åó„Å¶ ‚ö†Ô∏è</small>
        </div>
      </div>
    </div>
    <div class="example-card" style="background:linear-gradient(135deg, rgba(248,250,252,0.9), rgba(255,241,242,0.8)); border:2px solid rgba(225,29,72,0.2); border-radius:24px; padding:32px; text-align:center; position:relative; overflow:hidden;">
      <div style="position:relative; z-index:2;">
        <div style="font-size:16px; color:var(--accent); margin-bottom:12px; font-weight:800;">üò± ÂÆüÈöõ„ÅÆÁµêÊûú</div>
        <div style="font-size:32px; font-weight:900; margin-bottom:8px; background:linear-gradient(135deg, var(--brand), var(--brand2)); -webkit-background-clip:text; background-clip:text; color:transparent;">„Ç∏„Çπ üíï „Éä„É®„É≥</div>
        <div style="color:var(--brand); font-size:20px; font-weight:800;">Áõ∏ÊÄß 3% ¬∑ „ÅäÁ¨ë„ÅÑ„Éâ„É©„Éû üé≠</div>
        <div style="color:var(--muted); margin-top:8px;">"Á¨ë„ÅÑ„Å™„Åå„ÇâÈÄö„ÇäÈÅé„Åé„Çà„ÅÜ(Á¨ë) ‰∫∫Áîü‰Ωï„Åå„ÅÇ„Çã„ÅÆ üé≠"</div>
      </div>
      <div style="position:absolute; top:-50%; left:-50%; width:200%; height:200%; background:conic-gradient(from 0deg, transparent, rgba(225,29,72,0.03), transparent 90deg); animation:gentle-spin 12s linear infinite;"></div>
    </div>
  </section>

  <section id="result" class="card hidden" aria-live="polite" style="background:var(--card); border:2px solid var(--brand); position:relative; overflow:hidden; text-align:center; padding:32px 24px;">
    <div style="position:absolute; top:0; left:0; right:0; height:4px; background:linear-gradient(90deg,var(--brand),var(--brand2),var(--accent)); animation:result-shimmer 3s linear infinite;"></div>
    
    <!-- ÁµêÊûú„Éò„ÉÉ„ÉÄ„Éº -->
    <div style="margin-bottom:32px;">
      <div class="badge" style="background:var(--brand); color:white; font-weight:900; font-size:16px; padding:8px 16px; margin-bottom:16px;">üéâ Áõ∏ÊÄßÁµêÊûúÁô∫Ë°®ÔºÅ</div>
      <h2 id="title" style="font-size:clamp(28px,6vw,42px); background:linear-gradient(135deg,var(--brand),var(--brand2));-webkit-background-clip:text;background-clip:text;color:transparent; margin:0 0 12px 0; font-weight:900;">‚Äî</h2>
    </div>
    
    <!-- „É°„Ç§„É≥„Çπ„Ç≥„Ç¢„Çª„ÇØ„Ç∑„Éß„É≥ -->
    <div style="background:linear-gradient(135deg, rgba(225,29,72,0.05), rgba(124,58,237,0.08)); border-radius:20px; padding:32px; margin-bottom:32px; position:relative;">
      <div id="score" style="font-size:clamp(64px,12vw,96px); font-weight:900; background:linear-gradient(135deg,var(--brand),var(--brand2));-webkit-background-clip:text;background-clip:text;color:transparent; margin:0 0 8px 0; line-height:1;">‚Äî%</div>
      <div id="type" style="color:var(--brand); font-weight:800; font-size:clamp(20px,4vw,28px); margin-bottom:16px;">‚Äî</div>
      <p id="comment" style="color:var(--muted); font-size:18px; font-weight:600; line-height:1.4; margin:0; max-width:400px; margin:0 auto;"></p>
    </div>
    
    <!-- „Ç∑„Çß„Ç¢„Éª„Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥ -->
    <div style="display:flex; flex-direction:column; gap:16px; margin-bottom:24px;">
      <div style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center;">
        <a id="shareLine" class="line" target="_blank" rel="noopener" style="background:var(--line); color:white; border:none; padding:14px 20px; border-radius:14px; text-decoration:none; font-weight:800; transition:all 0.2s; box-shadow:0 4px 12px rgba(6,199,85,0.3);">üì± LINE„Ç∑„Çß„Ç¢</a>
        <a id="shareX" class="x" target="_blank" rel="noopener" style="background:#000; color:white; border:none; padding:14px 20px; border-radius:14px; text-decoration:none; font-weight:800; transition:all 0.2s; box-shadow:0 4px 12px rgba(0,0,0,0.2);">üê¶ X„Ç∑„Çß„Ç¢</a>
        <a id="shareFb" class="fb" target="_blank" rel="noopener" style="background:#1877f2; color:white; border:none; padding:14px 20px; border-radius:14px; text-decoration:none; font-weight:800; transition:all 0.2s; box-shadow:0 4px 12px rgba(24,119,242,0.3);">üëç Facebook</a>
      </div>
      <div style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center;">
        <button id="copy" class="modebtn" style="background:rgba(124,58,237,0.1); border:2px solid var(--brand2); color:var(--brand2); font-weight:800; padding:12px 20px; border-radius:12px; transition:all 0.2s;">üîó „É™„É≥„ÇØ„Ç≥„Éî„Éº</button>
        <button id="save" class="primary" style="font-size:14px; padding:12px 24px; border-radius:12px;">üíæ ÁµêÊûú„Ç´„Éº„Éâ‰øùÂ≠ò</button>
      </div>
    </div>
    
    <!-- ÂÜç„ÉÜ„Çπ„Éà„Ç¢„ÇØ„Ç∑„Éß„É≥ -->
    <div style="display:flex; justify-content:center; margin-bottom:32px;">
      <button id="again" class="primary" style="background:rgba(245,158,11,0.9); color:white; font-weight:800; padding:12px 24px; border-radius:12px; border:none; font-size:16px;">üîÑ ‰ªñ„ÅÆÂêçÂâç„Åß„ÉÜ„Çπ„Éà</button>
    </div>
    
    <!-- Á∞°Âçò„Å™Áµ±Ë®à -->
    <div style="background:rgba(248,250,252,0.6); border-radius:16px; padding:16px; text-align:center;">
      <div style="color:var(--muted); font-size:14px; font-weight:600;">
        <span id="testCount">0</span>ÂõûÁõÆ„ÅÆ„ÉÜ„Çπ„ÉàÂÆå‰∫ÜÔºÅ üéâ
      </div>
    </div>
    
    <canvas id="card" width="1080" height="1350" class="hidden" aria-hidden="true"></canvas>
  </section>

  <!-- („Ç™„Éó„Ç∑„Éß„É≥) Â∫ÉÂëäÊåøÂÖ•‰æã
  <section style="margin-top:16px">
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-XXXX" data-ad-slot="YYYY" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </section>
  -->
</main>

<footer>
  üî• Viral Fun Lab | „Éê„Ç§„É©„É´„ÉÜ„Çπ„Éà„ÅÆÊñ∞‰∏ñÁïå ‚ú®
</footer>

<script>
// ========== „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£ÔºàÂØæÁß∞„Ç∑„Éº„ÉâÔºâ ==========
function normalizeName(s){ return (s||'').trim().replace(/\s+/g,' ').slice(0,16); }
function pairKey(a,b){ // ÂØæÁß∞ÊÄß„Çí‰øùË®ºÔºöÂêçÂâç„ÅÆÈ†ÜÂ∫è„ÇíÂ§â„Åà„Å¶„ÇÇÂêå„ÅòÁµêÊûú
  const x = normalizeName(a).toLowerCase(), y = normalizeName(b).toLowerCase();
  return [x,y].sort().join('|');
}
function todayStr(){ const d=new Date(); return d.toISOString().slice(0,10); }

// „Éè„ÉÉ„Ç∑„É• ‚Üí PRNG (xmur3 + mulberry32)
function xmur3(str){ for(var i=1779033703^str.length, h1=3432918353, h2=461845907; i<str.length; i++) { h1 = Math.imul(h1 ^ str.charCodeAt(i), 2246822507); h2 = Math.imul(h2 ^ str.charCodeAt(i), 3266489909);} h1 = (h1^ (h1>>>16))>>>0; h2 = (h2^ (h2>>>13))>>>0; return function(){ h1 = Math.imul(h1 ^ (h1>>>16), 2246822507); h2 = Math.imul(h2 ^ (h2>>>13), 3266489909); return (h1^h2)>>>0; } }
function mulberry32(a){ return function(){ a |= 0; a = (a + 0x6D2B79F5) | 0; var t = Math.imul(a ^ (a >>> 15), 1 | a); t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t; return ((t ^ (t >>> 14)) >>> 0) / 4294967296; } }
function seededPercent(seedStr){
  const seed = xmur3(seedStr)(); const rng = mulberry32(seed);
  return Math.floor(rng()*101); // 0~100
}

// „Éê„Ç§„É©„É´„Å™„Çø„Ç§„Éó/„Ç≥„É°„É≥„Éà
const TYPES = [
  {range:[95,100], name:"ÈÅãÂëΩ„ÅÆËµ§„ÅÑÁ≥∏", emoji:"üí´", comments:[
    "„Åì„Çå„ÅØ...Ââç‰∏ñ„Åã„Çâ„ÅÆÁ¥ÑÊùü„Å®„Åó„ÅãÊÄù„Åà„Å™„ÅÑüí´", "DNA„É¨„Éô„É´„ÅßÂºï„Åã„ÇåÂêà„Å£„Å¶„Çã...ÁµêÂ©ö„Åó„Åã„Å™„ÅÑüë∞", "Âá∫‰ºö„Åà„ÅüÂ•áË∑°„Å´ÊÑüË¨ù...„Åì„ÅÆÁõ∏ÊÄß„ÅØÂÆù„Åè„ÅòÂΩìÈÅ∏Á¥öüé∞", "„ÇÇ„ÅÜ„Åì„Çå‰ª•‰∏ä„ÅÆÁõ∏ÊÄß„ÅØÂ≠òÂú®„Åó„Å™„ÅÑ„Åß„Åó„Çá...Áæ®„Åæ„Åó„Åô„Åé„Å¶Ê≥£„Åèüò≠"
  ]},
  {range:[90,94], name:"„ÇΩ„Ç¶„É´„É°„Ç§„Éà", emoji:"üíò", comments:[
    "Êú¨ÂΩì„Å´Áõ∏ÊÄß„ÇÑ„Å∞„ÅÑ...‰∫å‰∫∫„Åß„ÅÑ„Çã„Å®ÊôÇÈñì„ÅåÁßí„ÅßÈÅé„Åé„Çãüòç", "„Åì„Çì„Å™Áõ∏ÊÄß„ÅØ‰∏ÄÁîü„Å´‰∏ÄÂ∫¶ÔºÅÁæ®„Åæ„Åó„Åô„Åé„Çãü•∫", "ÈÄ£Áµ°„ÅÆ„ÉÜ„É≥„Éù„Åæ„Åß„Å¥„Å£„Åü„Çä...„Åì„Çå„ÅåÊú¨ÂΩì„ÅÆÈÅãÂëΩ‚ú®", "‰∏ÄÁ∑í„Å´„ÅÑ„Çã„Å†„Åë„Åß‰∏ñÁïå„ÅåËºù„ÅÑ„Å¶Ë¶ã„Åà„Çãüåü"
  ]},
  {range:[80,89], name:"ÁáÉ„Åà„ÇãÁõ∏ÊÄß", emoji:"üî•", comments:[
    "„Åì„Çå„Åè„Çâ„ÅÑÁÜ±„ÅÑÔºÅÂñßÂò©„Åó„Å¶„ÇÇ„Åô„Åê‰ª≤Áõ¥„Çäüî•", "„Ç®„Éç„É´„ÇÆ„Éº„ÇÑ„Å∞„ÅÑ„Åß„Åôüí• ‰∏ÄÁ∑í„Å´„ÅÑ„Çã„Å®Âπ∏„ÅõÈÅéÂ§öÔºÅ", "„Åì„ÅÆÁõ∏ÊÄß„Çí„Å©„ÅÜ„ÇÑ„Å£„Å¶ÊàëÊÖ¢„Åô„ÇãÔºüÊú¨ÂΩì„Å´Áæ®„Åæ„Åó„ÅÑüò§", "ÊØéÊó•„Åå„Éâ„É©„Éû„Åø„Åü„ÅÑ...ÂøÉËáì„Å´ÊÇ™„ÅÑ„Åë„Å©ÊúÄÈ´òüíì"
  ]},
  {range:[70,79], name:"„Éè„Éã„Éº„Ç´„ÉÉ„Éó„É´", emoji:"üçØ", comments:[
    "Áîò„ÄÖ„Åô„Åé„Å¶Ë¶ã„Å¶„Çã‰∫∫„ÅåÊÅ•„Åö„Åã„Åó„ÅÑüçØ", "„Åì„ÅÆ‰∫å‰∫∫„ÅÆÂë®„Çä„Å†„Åë„Éî„É≥„ÇØËâ≤„ÅÆ„Ç™„Éº„É©„Åå...üå∏", "„Éá„Éº„Éà„Éó„É©„É≥‰Ωï„Åß„ÇÇÊ•Ω„Åó„Åù„ÅÜÔºÅÈÅäÂúíÂú∞„Åß„ÇÇÂõ≥Êõ∏È§®„Åß„ÇÇüíë", "SNS„ÅÆ„Ç´„ÉÉ„Éó„É´ÂÜôÁúü„ÅåÁú©„Åó„Åô„Åé„ÇãÂïèÈ°åüì∏"
  ]},
  {range:[60,69], name:"ÊÅØ„Å¥„Å£„Åü„Çä", emoji:"üéØ", comments:[
    "‰ºöË©±„ÅÆ„Ç≠„É£„ÉÉ„ÉÅ„Éú„Éº„É´„ÅåËâØ„ÅÑüèì È£ü„Åπ„ÇãÊôÇ„ÇÇÂêà„ÅÜ„ÅóÔºÅ", "„Åä‰∫í„ÅÑ„ÅÆ„ÉÜ„É≥„Ç∑„Éß„É≥„ÅåÂêà„Åà„Å∞ÂÆåÁíß„Å™Áõ∏ÊÄß‚ú®", "„Åì„ÅÆÁµÑ„ÅøÂêà„Çè„ÅõÊÑèÂ§ñ„Å´„ÅÑ„ÅÑ„Å≠Ôºü„ÇÇ„Å£„Å®Ë¶ã„Åü„ÅÑüòä", "„ÉÑ„ÉÉ„Ç≥„Éü„Å®„Éú„Ç±„ÅÆÈÖçÂàÜ„ÅåÁµ∂Â¶ô...„ÅäÁ¨ë„ÅÑ„Ç≥„É≥„ÉìÁµêÊàêÔºüüé™"
  ]},
  {range:[50,59], name:"ÂæÆÂ¶ô„Å™ÈßÜ„ÅëÂºï„Åç", emoji:"üí≠", comments:[
    "ÂèãÈÅî‰ª•‰∏äÊÅã‰∫∫Êú™Ê∫Ä...„ÇÇ„Å©„Åã„Åó„ÅÑÈñ¢‰øÇÊÄßüí≠", "Ê∞ó„Å´„Å™„Çã„Åë„Å©‰∏ÄÊ≠©Ë∏è„ÅøÂá∫„Åõ„Å™„ÅÑ...„Åù„ÅÆÊÑü„Åò„Çè„Åã„Çãüòå", "LINE„ÅÆÊó¢Ë™≠„Çπ„É´„Éº„Åß‰∏ÄÂñú‰∏ÄÊÜÇ„Åô„ÇãÊó•„ÄÖüì±", "ÂëäÁôΩ„ÅÆ„Çø„Ç§„Éü„É≥„Ç∞Ë¶ãË®à„Çâ„ÅÑ‰∏≠...È†ëÂºµ„ÇåÔºÅüéØ"
  ]},
  {range:[40,49], name:"ÂèãÈÅî„ÅåÊúÄÈ´ò", emoji:"ü§ù", comments:[
    "‰∫∫ÊüÑ„ÅåËâØ„Åè„Å¶Ê•Ωü§ó ÂèãÈÅî„Å®„Åó„Å¶„ÅØ„Å¥„Å£„Åü„ÇäÔºÅ", "ÊÅãÊÑõ„ÅØÊÖéÈáç„Å´...„Åæ„ÅöÂèãÊÉÖ„ÇíÊ∑±„ÇÅ„Çà„ÅÜ", "„Åì„Çì„Å™‰∫∫„ÇíÂÅ¥„Å´ÁΩÆ„ÅÑ„Å¶„Åä„Åç„Åü„ÅÑÊú¨ÂΩì„Å´üí´", "È£≤„ÅøÂèãÈÅî„Å®„Åó„Å¶„ÅØÊúÄÈ´òÔºÅÊÅãÊÑõ„ÅØ...„ÅÜ„Éº„ÇìÔºüüç∫"
  ]},
  {range:[30,39], name:"Ê≠£ÂèçÂØæ„ÅÆÈ≠ÖÂäõ", emoji:"‚öñÔ∏è", comments:[
    "Ê≠£ÂèçÂØæ„Å†„Åë„Å©„Åù„Çå„Åå„Åæ„ÅüÈ≠ÖÂäõ‚öñÔ∏è", "Ë∂£Âë≥„ÅåÈÅï„ÅÜ„ÅÆ„ÅåÈÄÜ„Å´Êñ∞ÈÆÆÔºü", "„Åä‰∫í„ÅÑÈÅï„ÅÜ„ÅÆ„ÅåÈ≠ÖÂäõ...„Éê„É©„É≥„Çπ„Åï„ÅàÂèñ„Çå„Å∞OKÔºÅüé≠", "„Ç§„É≥„Éâ„Ç¢„Å®„Ç¢„Ç¶„Éà„Éâ„Ç¢...„Åß„ÇÇÊÑèÂ§ñ„Å®Ôºüüè†‚õ∫"
  ]},
  {range:[20,29], name:"Âä™ÂäõÊ¨°Á¨¨", emoji:"üèóÔ∏è", comments:[
    "Èñ¢‰øÇ„ÇÇÂª∫Ë®≠‰∏≠...„Ç≥„ÉÑ„Ç≥„ÉÑÁ©ç„Åø‰∏ä„Åí„Çà„ÅÜüèóÔ∏è", "‰ªä„ÅØÂæÆÂ¶ô„Åß„ÇÇÊôÇÈñì„ÅåËß£Ê±∫„Åó„Å¶„Åè„Çå„Çã„ÅØ„Åö‚è∞", "Á¨¨‰∏ÄÂç∞Ë±°„ÅØ„Ç§„Éû„Ç§„ÉÅ„Å†„Åë„Å©...ÂÆü„ÅØÈ≠ÖÂäõÁöÑ„Åã„ÇÇÔºüü§∑", "3„É∂ÊúàÊßòÂ≠êË¶ã„Å¶...„Åù„Çå„Åã„ÇâÂà§Êñ≠„Åó„Çà„ÅÜüìÖ"
  ]},
  {range:[10,19], name:"ÂÜ∑Ê∏©Êµ¥", emoji:"üßäüî•", comments:[
    "„Ç∏„Çß„ÉÉ„Éà„Ç≥„Éº„Çπ„Çø„Éº„Åø„Åü„ÅÑ„Å™Áõ∏ÊÄßüé¢ ËâØ„ÅÑÊôÇ„ÅØÊúÄÈ´òÔºÅ", "ÊÑüÊÉÖ„ÅÆ„Çπ„Ç§„ÉÉ„ÉÅË™øÁØÄ„ÅåÂøÖË¶Å...Ëæõ„ÅÑ„Åë„Å©", "ÊúüÂæÖÂÄ§„Çí‰∏ã„Åí„Å¶„Çπ„Çø„Éº„Éà„Åô„Çå„Å∞ÊÑèÂ§ñ„Å™Áô∫Ë¶ã„Åå„ÅÇ„Çã„Åã„ÇÇÔºüü§î", "Êúà3„ÅßÂñßÂò©„ÄÅÊúà4„Åß‰ª≤Áõ¥„Çä...Áñ≤„Çå„Åù„ÅÜüòÖ"
  ]},
  {range:[5,9], name:"Ëµ§‰ø°Âè∑", emoji:"üö®", comments:[
    "„Å°„Çá„Å£„Å®ÂæÖ„Å£„Å¶...„Åì„Çå„ÅØËÄÉ„ÅàÁõ¥„Åó„ÅüÊñπ„Ååüö®", "ÂèãÈÅî„Åø„Çì„Å™„ÅåÊ≠¢„ÇÅ„Çã„É¨„Éô„É´„ÅÆÁõ∏ÊÄßüíî", "„ÇΩ„É≠Ê¥ª„ÅÆÊñπ„ÅåÂπ∏„Åõ„Åã„ÇÇ...Êú¨Ê∞ó„ÅÆ„Ç¢„Éâ„Éê„Ç§„Çπüôè", "„Åì„ÅÆÁõ∏ÊÄß„Åß‰ªò„ÅçÂêà„ÅÜ„Å®„Çπ„Éà„É¨„ÇπMAXÁ¢∫ÂÆöüò∞"
  ]},
  {range:[0,4], name:"„ÅäÁ¨ë„ÅÑ„Éâ„É©„Éû", emoji:"üé≠", comments:[
    "„Éü„Éº„É†Á¥†Êùê„Å®„Åó„Å¶„ÅØÂÆåÁíßüòÇ ÊÄù„ÅÑÂá∫„Å®„Åó„Å¶Â∞ÅÂç∞ÂêÑÔºÅ", "„Åì„ÅÆÁµÑ„ÅøÂêà„Çè„Åõ...„ÇÆ„É£„Ç∞„Å´„ÅØËâØ„ÅÑ„Åë„Å©ÁèæÂÆü„ÅØ...", "Á¨ë„ÅÑ„Å™„Åå„ÇâÈÄö„ÇäÈÅé„Åé„Çà„ÅÜ(Á¨ë) ‰∫∫Áîü‰Ωï„Åå„ÅÇ„Çã„ÅÆüé≠", "ÂèãÊÉÖÁ†¥Â£ä„Ç≤„Éº„É†„Çà„ÇäÂç±Èô∫„Å™Áõ∏ÊÄß...„Åï„Çà„ÅÜ„Å™„Çâüëã"
  ]}
];
function pickType(score){
  for(const t of TYPES){ if(score>=t.range[0] && score<=t.range[1]) return t; }
  return TYPES[TYPES.length-1];
}
function randFrom(arr, seedExtra=""){
  const r = seededPercent(seedExtra + JSON.stringify(arr)) / 100; // 0~1
  return arr[Math.floor(r*arr.length)];
}

// ========== ÁµêÊûú„É¨„É≥„ÉÄ„É™„É≥„Ç∞ ==========
const els = {
  a: document.getElementById('a'),
  b: document.getElementById('b'),
  go: document.getElementById('go'),
  result: document.getElementById('result'),
  title: document.getElementById('title'),
  score: document.getElementById('score'),
  type: document.getElementById('type'),
  comment: document.getElementById('comment'),
  copy: document.getElementById('copy'),
  save: document.getElementById('save'),
  shareLine: document.getElementById('shareLine'),
  shareX: document.getElementById('shareX'),
  shareFb: document.getElementById('shareFb'),
  again: document.getElementById('again'),
  testCount: document.getElementById('testCount'),
  canvas: document.getElementById('card'),
};

function toast(msg, type='info'){
  const t=document.createElement('div'); 
  t.className=`toast ${type}`; 
  t.textContent=msg; 
  document.body.appendChild(t);
  setTimeout(()=>t.remove(), type==='error' ? 3000 : 1500);
}

function compute(a,b){
  try {
    a=normalizeName(a); b=normalizeName(b);
    if(!a || !b){ 
      toast('ÂêçÂâç„Çí‰∏°ÊñπÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ! üíï', 'error'); 
      return null; 
    }
    if(a.length < 2 || b.length < 2){
      toast('ÂêçÂâç„ÅØÊúÄ‰Ωé2ÊñáÂ≠ó‰ª•‰∏äÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ! ‚úçÔ∏è', 'error');
      return null;
    }
    if(a === b){
      toast('Âêå„ÅòÂêçÂâç„Åß„ÅØ„ÉÜ„Çπ„Éà„Åß„Åç„Åæ„Åõ„Çì! üòÖ', 'error');
      return null;
    }
  // ‰ªäÊó•„ÅÆÈÅãÂëΩ„É¢„Éº„Éâ„Å´Âõ∫ÂÆö
  const seed = pairKey(a,b) + '|' + todayStr();
  const score = seededPercent(seed);
  const t = pickType(score);
  const cmt = randFrom(t.comments, seed);
  return {a,b,score,type:t,comment:cmt,seed};
}

function render(res){
  const names = `${res.a} ‚ù§ ${res.b}`;
  els.title.textContent = names;
  els.score.textContent = `${res.score}%`;
  els.type.textContent  = `${res.type.name} ${res.type.emoji}`;
  els.comment.textContent = res.comment;
  els.result.classList.remove('hidden');

  // „ÉÜ„Çπ„Éà„Ç´„Ç¶„É≥„ÉàÊõ¥Êñ∞
  const count = parseInt(localStorage.getItem('testCount') || '0') + 1;
  localStorage.setItem('testCount', count.toString());
  els.testCount.textContent = count;

  // „Ç∑„Çß„Ç¢URL
  const base = location.origin + location.pathname.replace(/index\.html?$/,'');
  const u = `${base}?a=${encodeURIComponent(res.a)}&b=${encodeURIComponent(res.b)}&utm_source=share&utm_medium=button`;
  setupShare(u, `${res.a}‚ù§${res.b} Áõ∏ÊÄß${res.score}% ¬∑ ${res.type.name}`);

  // „Ç´„Éº„ÉâÊèèÁîª
  drawCard(res);
  
  // ÁµêÊûú„Å´„Çπ„ÇØ„É≠„Éº„É´
  els.result.scrollIntoView({ behavior: 'smooth' });
}

// Â±•Ê≠¥Ê©üËÉΩ„ÅØÂâäÈô§Ê∏à„Åø

// ========== „Ç≠„É£„É≥„Éê„Çπ„Ç´„Éº„Éâ ==========
function drawCard(res){
  const c=els.canvas, ctx=c.getContext('2d');
  // ËÉåÊôØ„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥ÔºàÊòé„Çã„ÅÑ„Éë„Çπ„ÉÜ„É´Ôºâ
  const g=ctx.createLinearGradient(0,0,1080,1350);
  g.addColorStop(0, '#FAFBFF'); g.addColorStop(1, '#FEF7FF');
  ctx.fillStyle=g; ctx.fillRect(0,0,1080,1350);
  // ÁôΩ„ÅÑ„Éë„Éç„É´
  ctx.fillStyle='#ffffff';
  roundRect(ctx, 60, 140, 960, 1070, 36, true);
  // „Çø„Ç§„Éà„É´
  ctx.fillStyle='#1E293B'; ctx.font='900 64px "Noto Sans JP", system-ui';
  wrapText(ctx, `${res.a} ‚ù§ ${res.b}`, 90, 260, 900, 72);
  // „Çµ„ÉñÔºà„Çø„Ç§„ÉóÔºâ
  ctx.fillStyle='#64748B'; ctx.font='800 40px "Noto Sans JP", system-ui';
  wrapText(ctx, `${res.type.name} ${res.type.emoji}`, 90, 350, 900, 52);
  // „Éë„Éº„Çª„É≥„Éà
  const grad = ctx.createLinearGradient(90,0,700,0);
  grad.addColorStop(0,'#E11D48'); grad.addColorStop(1,'#7C3AED');
  ctx.fillStyle=grad; ctx.font='900 120px "Noto Sans JP", system-ui';
  ctx.fillText(`${res.score}%`, 90, 500);
  // „Ç≥„É°„É≥„Éà
  ctx.fillStyle='#374151'; ctx.font='600 36px "Noto Sans JP", system-ui';
  wrapText(ctx, res.comment, 90, 580, 900, 48);
  // „Ç≤„Éº„Ç∏
  drawGauge(ctx, 90, 760, 900, 40, res.score/100);
  // „Éï„ÉÉ„Çø„Éº
  ctx.fillStyle='#64748b'; ctx.font='600 28px "Noto Sans JP", system-ui';
  ctx.fillText(new Date().toISOString().slice(0,10) + ' ¬∑ tests.mahalohana-bruce.com', 90, 1158);
}

function drawGauge(ctx, x,y,w,h,pct){
  ctx.fillStyle='rgba(225,29,72,.08)';
  roundRect(ctx, x,y,w,h, h/2, true);
  const grad = ctx.createLinearGradient(x,0,x+w,0);
  grad.addColorStop(0,'#E11D48'); grad.addColorStop(1,'#7C3AED');
  ctx.fillStyle=grad;
  roundRect(ctx, x,y,Math.max(h, w*pct),h, h/2, true);
}

function savePng(){
  const link = document.createElement('a');
  link.download='compat-card.png';
  link.href = els.canvas.toDataURL('image/png');
  link.click();
}

function roundRect(ctx,x,y,w,h,r,fill){
  ctx.beginPath();
  ctx.moveTo(x+r,y);
  ctx.arcTo(x+w,y,x+w,y+h,r);
  ctx.arcTo(x+w,y+h,x,y+h,r);
  ctx.arcTo(x,y+h,x,y,r);
  ctx.arcTo(x,y,x+w,y,r);
  ctx.closePath();
  if(fill) ctx.fill();
}
function wrapText(ctx, text, x, y, maxWidth, lineHeight){
  const words = (text||'').split(' ');
  let line='', yy=y;
  for(let i=0;i<words.length;i++){
    const test=line+words[i]+' ';
    if(ctx.measureText(test).width>maxWidth && i>0){ ctx.fillText(line, x, yy); line=words[i]+' '; yy+=lineHeight; }
    else line=test;
  }
  ctx.fillText(line, x, yy);
}

// ========== „Ç∑„Çß„Ç¢ ==========
function setupShare(url, title){
  const txt = encodeURIComponent(title);
  const u   = encodeURIComponent(url);
  els.shareLine.href = `https://line.me/R/msg/text/?${txt}%0A${u}`;
  els.shareX.href    = `https://twitter.com/intent/tweet?text=${txt}&url=${u}`;
  els.shareFb.href   = `https://www.facebook.com/sharer/sharer.php?u=${u}`;
  els.copy.onclick = async ()=>{ try{ await navigator.clipboard.writeText(url); toast('„É™„É≥„ÇØ„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ'); }catch(e){ alert(url); } };
  els.save.onclick = savePng;
}

// ========== „Ç§„Éô„É≥„Éà ==========
els.again.onclick = ()=>{ 
  els.a.value = ''; els.b.value = '';
  els.result.classList.add('hidden');
  els.a.focus();
  window.scrollTo({ top: 0, behavior: 'smooth' });
};

els.go.onclick = async ()=>{
  const btn = els.go;
  if(btn.classList.contains('loading')) return;
  
  try {
    // „É≠„Éº„Éá„Ç£„É≥„Ç∞ÈñãÂßã
    btn.classList.add('loading');
    btn.disabled = true;
    const originalText = btn.textContent;
    btn.textContent = 'Áõ∏ÊÄßÂàÜÊûê‰∏≠...';
    
    // ÊúÄ‰Ωé„É≠„Éº„Éá„Ç£„É≥„Ç∞ÊôÇÈñì (UX)
    await new Promise(resolve => setTimeout(resolve, 800));
    
    const res = compute(els.a.value, els.b.value);
    if(!res) return;
    
    render(res);
    toast('‚ú® Áõ∏ÊÄßÂàÜÊûêÂÆå‰∫Ü!', 'success');
    
    // GA „Ç§„Éô„É≥„ÉàËøΩË∑°
    if(typeof gtag !== 'undefined') {
      gtag('event', 'chemistry_test_completed', {
        event_category: 'engagement',
        event_label: `${res.a}-${res.b}`,
        chemistry_score: res.score,
        chemistry_type: res.type.name
      });
    }
    
  } catch(error) {
    console.error('„ÉÜ„Çπ„ÉàÂÆüË°å„Ç®„É©„Éº:', error);
    toast('„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü! „Éö„Éº„Ç∏„ÇíÊõ¥Êñ∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ üîÑ', 'error');
  } finally {
    // „É≠„Éº„Éá„Ç£„É≥„Ç∞ÁµÇ‰∫Ü
    btn.classList.remove('loading');
    btn.disabled = false;
    btn.textContent = 'üîÆ ‰ªä„Åô„ÅêÈÅãÂëΩÁ¢∫Ë™çÔºÅ üîÆ';
  }
};

// Enter„Ç≠„Éº„Çµ„Éù„Éº„Éà
[els.a, els.b].forEach(input => {
  input.addEventListener('keypress', (e) => {
    if(e.key === 'Enter') els.go.click();
  });
});

// „ÇØ„Ç®„É™„Åß„ÅÆÈÄ≤ÂÖ•ÊôÇËá™Âãï„É¨„É≥„ÉÄ„É™„É≥„Ç∞ (?a=..&b=..)
(function preload(){
  const p = new URLSearchParams(location.search);
  const a = p.get('a')||''; const b = p.get('b')||'';
  if(a&&b){ els.a.value=a; els.b.value=b; const r=compute(a,b); if(r) render(r); }
  
  // „ÉÜ„Çπ„Éà„Ç´„Ç¶„É≥„ÉàÂàùÊúüÂåñ
  const count = localStorage.getItem('testCount') || '0';
  els.testCount.textContent = count;
})();
</script>
</body>
</html>