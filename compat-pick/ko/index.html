<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>ğŸ”¥ ì´ë¦„ ì¼€ë¯¸ í…ŒìŠ¤íŠ¸ | ê¶í•© í¼ì„¼íŠ¸ ë½‘ê¸° - ë°”ì´ëŸ´ í…ŒìŠ¤íŠ¸</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="ğŸ’˜ ì´ë¦„ë§Œ ì…ë ¥í•˜ë©´ ë! ì¼€ë¯¸ í¼ì„¼íŠ¸ì™€ ì¬ë°ŒëŠ” ë¶„ì„ ê²°ê³¼ë¥¼ ë°›ì•„ë³´ì„¸ìš”. ì¹œêµ¬ë“¤ê³¼ ê³µìœ í•˜ê³  ë¹„êµí•´ë³´ëŠ” ì¬ë¯¸ê¹Œì§€! ì§€ê¸ˆ ë°”ë¡œ í…ŒìŠ¤íŠ¸í•˜ê³  SNSì— ìë‘í•˜ì„¸ìš” âœ¨">
<link rel="canonical" href="https://tests.mahalohana-bruce.com/compat-pick/ko/">

<!-- hreflang -->
<link rel="alternate" hreflang="ko" href="https://tests.mahalohana-bruce.com/compat-pick/ko/">
<link rel="alternate" hreflang="ja" href="https://tests.mahalohana-bruce.com/compat-pick/ja/">
<link rel="alternate" hreflang="en" href="https://tests.mahalohana-bruce.com/compat-pick/en/">
<link rel="alternate" hreflang="x-default" href="https://tests.mahalohana-bruce.com/compat-pick/ko/">

<!-- OGP -->
<meta property="og:type" content="website">
<meta property="og:title" content="ğŸ”¥ ì´ë¦„ ì¼€ë¯¸ í…ŒìŠ¤íŠ¸ | ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”!">
<meta property="og:description" content="ğŸ’˜ ì´ë¦„ë§Œ ì…ë ¥í•˜ë©´ ì¼€ë¯¸ í¼ì„¼íŠ¸ ì™„ë£Œ! ì¹œêµ¬ë“¤ê³¼ ë¹„êµí•˜ê³  SNSì— ê³µìœ í•˜ëŠ” ì¬ë¯¸ê¹Œì§€ âœ¨ ë°”ë¡œ í•´ë³´ì„¸ìš”!">
<meta property="og:url" content="https://tests.mahalohana-bruce.com/compat-pick/ko/">
<meta property="og:image" content="https://tests.mahalohana-bruce.com/compat-pick/og-ko.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="ğŸ”¥ ì´ë¦„ ì¼€ë¯¸ í…ŒìŠ¤íŠ¸ | ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”!">
<meta name="twitter:description" content="ğŸ’˜ ì´ë¦„ë§Œ ì…ë ¥í•˜ë©´ ì¼€ë¯¸ í¼ì„¼íŠ¸ ì™„ë£Œ! ì¹œêµ¬ë“¤ê³¼ ë¹„êµí•˜ê³  SNSì— ê³µìœ í•˜ëŠ” ì¬ë¯¸ê¹Œì§€ âœ¨">
<meta name="twitter:image" content="https://tests.mahalohana-bruce.com/compat-pick/og-ko.png">
<meta name="twitter:site" content="@tests_mahalohana">

<link rel="icon" href="https://tests.mahalohana-bruce.com/favicon.png" type="image/png">

<!-- Google AdSense Auto Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5508768187151867" crossorigin="anonymous"></script>

<style>
:root{
  --bg:#F8FAFC; --card:#FFFFFF; --text:#1E293B; --muted:#64748B;
  --brand:#E11D48; --brand2:#7C3AED; --accent:#F59E0B; --line:#06c755;
  --glow:rgba(225,29,72,0.15); --success:#10B981;
  --soft-bg:#FEF7FF; --gradient-bg:#FAFBFF;
}
*{box-sizing:border-box}
body{
  margin:0; color:var(--text); overflow-x:hidden;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans KR", system-ui, sans-serif;
  background: linear-gradient(135deg, var(--gradient-bg) 0%, var(--soft-bg) 50%, #FFF1F2 100%);
  position:relative;
}
body::before{
  content:''; position:fixed; top:0; left:0; right:0; bottom:0; z-index:-1;
  background: 
    radial-gradient(circle at 20% 80%, rgba(225,29,72,0.05) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(124,58,237,0.08) 0%, transparent 50%);
  animation: soft-float 12s ease-in-out infinite alternate;
}
@keyframes soft-float {
  0% { opacity: 0.4; transform: translateY(0px); }
  100% { opacity: 0.6; transform: translateY(-10px); }
}
header{
  position:sticky; top:0; z-index:10;
  background:rgba(255,255,255,0.95);
  backdrop-filter:blur(20px); border-bottom:1px solid rgba(225,29,72,.1);
  box-shadow: 0 2px 20px rgba(225,29,72,0.08);
}
.wrap{max-width:960px; margin:0 auto; padding:16px}
.top{display:flex; align-items:center; justify-content:space-between; gap:12px}
.brand{display:flex; align-items:center; gap:10px}
.logo{width:36px; height:36px; border-radius:11px; 
  background:linear-gradient(135deg, var(--brand), var(--brand2)); 
  box-shadow:0 6px 20px var(--glow);
  animation: pulse-glow 3s ease-in-out infinite;
}
@keyframes pulse-glow {
  0%, 100% { box-shadow:0 6px 20px var(--glow); }
  50% { box-shadow:0 8px 30px rgba(255,107,107,0.5); }
}
.title{font-weight:800}
main{padding:24px 16px 80px}
.card{
  background:var(--card); border:1px solid rgba(225,29,72,.1);
  border-radius:24px; padding:24px; 
  box-shadow:0 8px 32px rgba(225,29,72,.08), inset 0 1px 0 rgba(255,255,255,.8);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.card:hover{
  transform: translateY(-2px);
  box-shadow:0 12px 48px rgba(225,29,72,.12);
}
.hero{display:grid; grid-template-columns:1.2fr 0.8fr; gap:32px; align-items:center}
.hero-content{text-align:center}
@media (max-width: 860px){ .hero{grid-template-columns:1fr; gap:20px} }
h1{margin:.1em 0 .3em; font-size:clamp(28px, 4.5vw, 48px); 
  text-align:center; font-weight:900;
  background:linear-gradient(135deg, var(--brand), var(--brand2), var(--accent));
  -webkit-background-clip:text; background-clip:text; color:transparent;
  text-shadow:0 0 30px var(--glow);
  animation: text-shine 3s ease-in-out infinite alternate;
}
@keyframes text-shine {
  0% { filter: brightness(1); }
  100% { filter: brightness(1.2); }
}
.muted{color:var(--muted)}
.pill{
  display:inline-flex; gap:8px; align-items:center; font-size:13px; font-weight:800; color:#fff;
  background:linear-gradient(90deg, var(--brand), var(--brand2)); padding:8px 16px; border-radius:999px;
  box-shadow:0 4px 15px var(--glow); animation: pill-float 4s ease-in-out infinite;
  position:relative; overflow:hidden;
}
.pill::before{
  content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  animation: pill-shine 2s linear infinite;
}
@keyframes pill-float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-3px); }
}
@keyframes pill-shine {
  0% { left: -100%; }
  100% { left: 100%; }
}
.row{display:grid; grid-template-columns:1fr 1fr; gap:20px; align-items:end; margin-bottom:20px;}
input[type=text]{
  width:100%; padding:16px 20px; border-radius:16px; 
  border:2px solid rgba(225,29,72,.15); font-size:16px;
  background:rgba(248,250,252,0.8); color:var(--text);
  transition: all 0.3s ease;
}
input[type=text]:focus{
  outline:none; border-color:var(--brand);
  box-shadow:0 0 0 3px var(--glow); transform:scale(1.02);
  background:white;
}
input[type=text]::placeholder{
  color:var(--muted);
}
.controls{display:flex; flex-wrap:wrap; gap:10px; margin-top:10px}
.modebtn{
  padding:10px 12px; border-radius:12px; background:rgba(248,250,252,0.9); color:var(--text); cursor:pointer; font-weight:700; border:1px solid rgba(225,29,72,0.3); transition:all 0.3s ease;
}
.modebtn:hover{
  transform:translateY(-1px); box-shadow:0 4px 12px rgba(225,29,72,.1);
  background:white;
}
button.primary{
  appearance:none; border:none; cursor:pointer; padding:16px 24px; border-radius:16px; 
  font-weight:900; letter-spacing:.3px; font-size:16px;
  background:linear-gradient(135deg, var(--brand), var(--brand2)); color:#fff; 
  box-shadow:0 10px 30px var(--glow);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position:relative; overflow:hidden;
}
button.primary:disabled{
  opacity:0.7; cursor:not-allowed; transform:none !important;
}
button.primary.loading{
  pointer-events:none;
}
button.primary.loading::after{
  content:''; position:absolute; top:50%; left:50%; width:20px; height:20px;
  margin:-10px 0 0 -10px; border:2px solid transparent; border-top:2px solid #fff;
  border-radius:50%; animation:spin 1s linear infinite;
}
@keyframes spin{
  0%{transform:rotate(0deg);}
  100%{transform:rotate(360deg);}
}
button.primary:hover{
  transform: translateY(-2px) scale(1.05);
  box-shadow:0 15px 40px rgba(255,107,107,0.4);
}
button.primary:active{
  transform: translateY(0) scale(1.02);
}
button.primary::before{
  content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s;
}
button.primary:hover::before{
  left:100%;
}
.result h2{font-size:clamp(22px, 2.6vw, 28px); margin:.2em 0}
.badge{display:inline-flex; gap:8px; align-items:center; padding:8px 12px; border-radius:999px; font-size:12px; font-weight:800; background:rgba(255,107,107,0.1); color:var(--brand); border:1px solid rgba(255,107,107,0.3); backdrop-filter:blur(5px);}
.grid2{display:grid; grid-template-columns:1fr 1fr; gap:14px}
@media (max-width: 720px){ 
  .container {max-width: 100%; padding: 12px;}
  .row{grid-template-columns:1fr; gap:12px;}
  .hero{grid-template-columns:1fr; gap:16px; text-align:center;}
  .example-card{margin-top:20px;}
  input[type=text]{font-size:16px; padding:14px 16px;}
  button.primary{padding:14px 24px; font-size:16px;}
  #result {padding:20px 12px !important;}
  #result > div[style*="flex"] {flex-direction:column !important;}
  #result a, #result button {min-width:200px; text-align:center; margin-bottom:8px;}
  .share{justify-content:center;}
}

@media (max-width: 480px) {
  .container {
    padding: 8px;
    max-width: 100%;
  }
  
  .header-controls {
    top: 4px;
    right: 4px;
    padding: 4px;
    gap: 4px;
  }
  
  .lang-btn {
    padding: 4px 8px;
    font-size: 10px;
  }
  
  .theme-toggle {
    width: 32px;
    height: 32px;
    font-size: 12px;
  }

  h1 {
    font-size: 1.6rem;
    line-height: 1.2;
  }

  .subtitle {
    font-size: 0.85rem;
    margin-bottom: 12px;
    padding: 0 8px;
  }
  
  .pill {
    font-size: 11px;
    padding: 6px 12px;
  }
  
  input[type=text] {
    font-size: 16px;
    padding: 12px 14px;
  }
  
  .card {
    padding: 16px;
    border-radius: 16px;
  }
  
  .example-card {
    padding: 20px;
  }
  
  #result {
    padding: 16px 8px !important;
  }
  
  #result .badge {
    font-size: 14px;
    padding: 6px 12px;
  }
  
  #result #score {
    font-size: clamp(48px, 10vw, 72px) !important;
  }
  
  #result #type {
    font-size: clamp(16px, 4vw, 20px) !important;
  }
  
  #result #comment {
    font-size: 16px !important;
  }
}
.share{display:flex; gap:10px; flex-wrap:wrap}
.share a, .share button{padding:12px 16px; border-radius:12px; font-weight:800; transition:all 0.2s ease;}
.share a:hover, .share button:hover{transform:translateY(-2px) scale(1.05);}
.share a{background:#fff; border:1px solid rgba(0,0,0,.12); text-decoration:none; color:var(--text)}
.share a.line{border-color:#06c755}
.share a.x{border-color:#111}
.share a.fb{border-color:#1877f2}
footer{color:var(--muted); text-align:center; padding:40px 0; background:rgba(248,250,252,0.8); backdrop-filter:blur(10px);}
.hidden{display:none}
small.hint{color:var(--muted); display:block; margin-top:6px}
.table{width:100%; border-collapse:separate; border-spacing:0; font-size:14px}
.table th, .table td{padding:10px 8px; border-bottom:1px solid rgba(0,0,0,.06)}
.table th{color:#64748b; text-align:left}
.toast{
  position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
  background:linear-gradient(135deg,var(--brand),var(--brand2)); color:#fff; padding:12px 20px; border-radius:15px; z-index:9999; font-weight:800; box-shadow:0 10px 30px var(--glow); animation:toast-in 0.3s ease;
}
.toast.error{
  background:linear-gradient(135deg,#dc2626,#b91c1c); box-shadow:0 10px 30px rgba(220,38,38,0.3);
}
.toast.success{
  background:linear-gradient(135deg,#059669,#047857); box-shadow:0 10px 30px rgba(5,150,105,0.3);
}
@keyframes toast-in {
  from { opacity:0; transform:translateX(-50%) translateY(20px); }
  to { opacity:1; transform:translateX(-50%) translateY(0); }
}
@keyframes gentle-spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
@keyframes result-shimmer {
  0% { transform:translateX(-100%); }
  100% { transform:translateX(100%); }
}
@keyframes pulse-btn {
  0%, 100% { transform: scale(1); box-shadow:0 10px 30px var(--glow); }
  50% { transform: scale(1.05); box-shadow:0 15px 40px rgba(255,107,107,0.4); }
}
</style>

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-45VSGEM7EZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-45VSGEM7EZ', {
    page_title: 'Name Chemistry Test KO',
    page_location: window.location.href
  });
</script>

<script async src="https://pagead2.googlesyndication.com/pagead/js?client=ca-pub-5508768187151867" crossorigin="anonymous"></script>

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"WebApplication",
  "name":"ëœë¤ ê¶í•© ë½‘ê¸°",
  "url":"https://tests.mahalohana-bruce.com/compat-pick/ko/",
  "applicationCategory":"EntertainmentApplication",
  "inLanguage":"ko",
  "operatingSystem":"All"
}
</script>
  <meta name="mobile-web-app-capable" content="yes">

</head>
<body>
<header>
  <div class="wrap top">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <div class="title" style="background:linear-gradient(135deg,var(--brand),var(--brand2));-webkit-background-clip:text;background-clip:text;color:transparent;">ğŸ”¥ ì¼€ë¯¸ í…ŒìŠ¤íŠ¸</div>
        <div style="color:var(--accent); font-size:13px; font-weight:600;">ì´ë¦„ë§Œ ì…ë ¥í•˜ë©´ ì¼€ë¯¸ í¼ì„¼íŠ¸ ì™„ì„±! âœ¨</div>
      </div>
    </div>
    <nav aria-label="ì–¸ì–´">
      <a class="muted" href="../ko/index.html" aria-current="page">í•œêµ­ì–´</a> Â·
      <a class="muted" href="../ja/index.html">æ—¥æœ¬èª</a> Â·
      <a class="muted" href="../en/index.html">English</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <section class="card hero">
    <div class="hero-content">
      <span class="pill">âš¡ 1ë¶„ë§Œì— ìš´ëª… í™•ì¸ âš¡ ì§€ê¸ˆ í•«í•¨!</span>
      <h1>ì§€ê¸ˆ ë‹¹ì¥ í™•ì¸!<br>ë„ˆì™€ ë‚˜ì˜ ìš´ëª… ì¼€ë¯¸ëŠ”? ğŸ”¥</h1>
      <p class="muted" style="font-size:18px; margin-bottom:32px; text-align:center;">ğŸ˜± ì§„ì§œ ì‚¬ë‘? ì‹œê°„ë‚­ë¹„? ìš´ëª…ì„ ì•Œì•„ì•¼ í•´! <br>ğŸ”® ì˜¤ëŠ˜ ë”± í•œ ë²ˆë§Œ ì•Œ ìˆ˜ ìˆëŠ” ì§„ì‹¤...</p>
      <div class="card">
        <div class="row">
          <div>
            <label for="a" style="color:var(--accent); font-size:14px; font-weight:800; display:block; margin-bottom:8px;">ğŸ™‹â€â™€ï¸ ë‚´ ì´ë¦„</label>
            <input id="a" type="text" maxlength="16" placeholder="ì˜ˆ: ë¸Œë£¨ìŠ¤">
          </div>
          <div>
            <label for="b" style="color:var(--accent); font-size:14px; font-weight:800; display:block; margin-bottom:8px;">ğŸ’• ìƒëŒ€ ì´ë¦„</label>
            <input id="b" type="text" maxlength="16" placeholder="ì˜ˆ: í•˜ë‚˜">
          </div>
        </div>
        <div class="controls" style="display:flex; justify-content:center; margin-top:24px; position:relative;">
          <button id="go" class="primary" style="font-size:18px; padding:18px 40px; border-radius:25px; animation: pulse-btn 2s infinite;">ğŸ”® ì§€ê¸ˆ ìš´ëª… í™•ì¸í•˜ê¸°! ğŸ”®</button>
        </div>
        <div style="text-align:center; margin-top:16px; padding:12px; background:rgba(225,29,72,0.08); border-radius:12px; border:1px solid rgba(225,29,72,0.2);">
          <small style="color:var(--brand); font-weight:700;">âš ï¸ ê²½ê³ : ì´ ê²°ê³¼ë¥¼ ë³´ë©´ ëŒ€ì¶© ì‚¬ê·ˆ ìˆ˜ ì—†ìŒ! ê°ì˜¤ ë°° âš ï¸</small>
        </div>
      </div>
    </div>
    <div class="example-card" style="background:linear-gradient(135deg, rgba(248,250,252,0.9), rgba(255,241,242,0.8)); border:2px solid rgba(225,29,72,0.2); border-radius:24px; padding:32px; text-align:center; position:relative; overflow:hidden;">
      <div style="position:relative; z-index:2;">
        <div style="font-size:16px; color:var(--accent); margin-bottom:12px; font-weight:800;">ğŸ˜± ì‹¤ì œ ê²°ê³¼</div>
        <div style="font-size:32px; font-weight:900; margin-bottom:8px; background:linear-gradient(135deg, var(--brand), var(--brand2)); -webkit-background-clip:text; background-clip:text; color:transparent;">ì§€ìˆ˜ ğŸ’• ë‚˜ì–°</div>
        <div style="color:var(--brand); font-size:20px; font-weight:800;">ì¼€ë¯¸ 3% Â· ì›ƒí”ˆ ë“œë¼ë§ˆ ğŸ­</div>
        <div style="color:var(--muted); margin-top:8px;">"ê·¸ëƒ¥ ì›ƒìœ¼ë©´ì„œ ì§€ë‚˜ê°€ì ã…‹ã…‹ ì¸ìƒ ë­ìˆì–´ ğŸ­"</div>
      </div>
      <div style="position:absolute; top:-50%; left:-50%; width:200%; height:200%; background:conic-gradient(from 0deg, transparent, rgba(225,29,72,0.03), transparent 90deg); animation:gentle-spin 12s linear infinite;"></div>
    </div>
  </section>

  <section id="result" class="card hidden" aria-live="polite" style="background:var(--card); border:2px solid var(--brand); position:relative; overflow:hidden; text-align:center; padding:32px 24px;">
    <div style="position:absolute; top:0; left:0; right:0; height:4px; background:linear-gradient(90deg,var(--brand),var(--brand2),var(--accent)); animation:result-shimmer 3s linear infinite;"></div>
    
    <!-- ê²°ê³¼ í—¤ë” -->
    <div style="margin-bottom:32px;">
      <div class="badge" style="background:var(--brand); color:white; font-weight:900; font-size:16px; padding:8px 16px; margin-bottom:16px;">ğŸ‰ ì¼€ë¯¸ ê²°ê³¼ ë°œí‘œ!</div>
      <h2 id="title" style="font-size:clamp(28px,6vw,42px); background:linear-gradient(135deg,var(--brand),var(--brand2));-webkit-background-clip:text;background-clip:text;color:transparent; margin:0 0 12px 0; font-weight:900;">â€”</h2>
    </div>
    
    <!-- ë©”ì¸ ìŠ¤ì½”ì–´ ì„¹ì…˜ -->
    <div style="background:linear-gradient(135deg, rgba(225,29,72,0.05), rgba(124,58,237,0.08)); border-radius:20px; padding:32px; margin-bottom:32px; position:relative;">
      <div id="score" style="font-size:clamp(64px,12vw,96px); font-weight:900; background:linear-gradient(135deg,var(--brand),var(--brand2));-webkit-background-clip:text;background-clip:text;color:transparent; margin:0 0 8px 0; line-height:1;">â€”%</div>
      <div id="type" style="color:var(--brand); font-weight:800; font-size:clamp(20px,4vw,28px); margin-bottom:16px;">â€”</div>
      <p id="comment" style="color:var(--muted); font-size:18px; font-weight:600; line-height:1.4; margin:0; max-width:400px; margin:0 auto;"></p>
    </div>
    
    <!-- ìƒì„¸ ë¶„ì„ ì„¹ì…˜ -->
    <div style="background:rgba(255,255,255,0.7); border-radius:20px; padding:24px; margin-bottom:24px; border:1px solid rgba(225,29,72,0.1);">
      <div style="text-align:center; margin-bottom:20px;">
        <h3 style="color:var(--brand); font-size:20px; font-weight:800; margin:0 0 8px 0;">ğŸ’¡ ìƒì„¸ ë¶„ì„</h3>
      </div>
      
      <div class="grid2" style="gap:16px;">
        <div style="background:rgba(225,29,72,0.05); border-radius:12px; padding:16px;">
          <div style="color:var(--brand); font-weight:700; font-size:14px; margin-bottom:8px;">ğŸ¯ ì¼€ë¯¸ í¬ì¸íŠ¸</div>
          <div id="chemistryTips" style="color:var(--muted); font-size:14px; line-height:1.4;"></div>
        </div>
        
        <div style="background:rgba(124,58,237,0.05); border-radius:12px; padding:16px;">
          <div style="color:var(--brand2); font-weight:700; font-size:14px; margin-bottom:8px;">ğŸ’« ê´€ê³„ ì¡°ì–¸</div>
          <div id="relationshipTips" style="color:var(--muted); font-size:14px; line-height:1.4;"></div>
        </div>
      </div>
      
      <div style="margin-top:16px; background:rgba(245,158,11,0.05); border-radius:12px; padding:16px;">
        <div style="color:#d97706; font-weight:700; font-size:14px; margin-bottom:8px;">ğŸŒŸ íŠ¹ë³„í•œ í•œë§ˆë””</div>
        <div id="specialMessage" style="color:var(--muted); font-size:14px; line-height:1.4; font-style:italic;"></div>
      </div>
    </div>

    <!-- ê³µìœ  ë° ì•¡ì…˜ ë²„íŠ¼ -->
    <div style="display:flex; flex-direction:column; gap:16px; margin-bottom:24px;">
      <div style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center;">
        <a id="shareLine" class="line" target="_blank" rel="noopener" style="background:var(--line); color:white; border:none; padding:14px 20px; border-radius:14px; text-decoration:none; font-weight:800; transition:all 0.2s; box-shadow:0 4px 12px rgba(6,199,85,0.3);">ğŸ“± LINE ê³µìœ </a>
        <a id="shareX" class="x" target="_blank" rel="noopener" style="background:#000; color:white; border:none; padding:14px 20px; border-radius:14px; text-decoration:none; font-weight:800; transition:all 0.2s; box-shadow:0 4px 12px rgba(0,0,0,0.2);">ğŸ¦ X ê³µìœ </a>
        <a id="shareFb" class="fb" target="_blank" rel="noopener" style="background:#1877f2; color:white; border:none; padding:14px 20px; border-radius:14px; text-decoration:none; font-weight:800; transition:all 0.2s; box-shadow:0 4px 12px rgba(24,119,242,0.3);">ğŸ‘ Facebook</a>
      </div>
      <div style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center;">
        <button id="copy" class="modebtn" style="background:rgba(124,58,237,0.1); border:2px solid var(--brand2); color:var(--brand2); font-weight:800; padding:12px 20px; border-radius:12px; transition:all 0.2s;">ğŸ”— ë§í¬ ë³µì‚¬</button>
        <button id="save" class="primary" style="font-size:14px; padding:12px 24px; border-radius:12px;">ğŸ’¾ ê²°ê³¼ ì¹´ë“œ ì €ì¥</button>
      </div>
    </div>

    <!-- In-Article Ad -->
    <div style="margin: 32px 0; text-align: center;">
      
      <ins class="adsbygoogle"
           style="display:block; text-align:center;"
           data-ad-layout="in-article"
           data-ad-format="fluid"
           data-ad-client="ca-pub-5508768187151867"
           data-ad-slot="5430524682"></ins>
      <script>
           (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
    
    <!-- ì¬í…ŒìŠ¤íŠ¸ ì•¡ì…˜ -->
    <div style="display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-bottom:32px;">
      <button id="again" class="primary" style="background:rgba(245,158,11,0.9); color:white; font-weight:800; padding:12px 24px; border-radius:12px; border:none; font-size:16px;">ğŸ”„ ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
      <a id="moreTests" href="/" style="background:rgba(16,185,129,0.12); border:2px solid #10B981; color:#0f766e; font-weight:800; padding:12px 20px; border-radius:12px; text-decoration:none; font-size:16px; display:inline-flex; align-items:center;">ğŸ² ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ í•˜ê¸°ë„</a>
    </div>
    
    <!-- ê°„ë‹¨í•œ í†µê³„ -->
    <div style="background:rgba(248,250,252,0.6); border-radius:16px; padding:16px; text-align:center;">
      <div style="color:var(--muted); font-size:14px; font-weight:600;">
        <span id="testCount">0</span>ë²ˆì§¸ í…ŒìŠ¤íŠ¸ ì™„ë£Œ! ğŸ‰
      </div>
    </div>
    
    <canvas id="card" width="1080" height="1350" class="hidden" aria-hidden="true"></canvas>
  </section>

  <!-- Mobile Display Ad -->
  <section style="margin-top:20px; max-width:860px; margin-left:auto; margin-right:auto; text-align:center;">
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5508768187151867" data-ad-slot="7591944706" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </section>
</main>

<footer class="site-footer" style="text-align:center;padding:16px 12px;color:#64748b;font-size:14px;">
  <a id="home-link" href="/" style="display:inline-block;text-decoration:none;color:#2563eb;font-weight:800;">ğŸ  í…ŒìŠ¤íŠ¸ ëª©ë¡ ë³´ê¸°</a>
  <div class="footer-lang" style="margin-top:6px;font-size:12px;line-height:1;">
    <span style="font-weight:700;color:#334155;">í•œêµ­ì–´</span> Â· <a href="/ja/" style="color:#475569;text-decoration:none;">æ—¥æœ¬èª</a> Â· <a href="/en/" style="color:#475569;text-decoration:none;">English</a>
  </div>
  <div class="footer-brand" style="margin-top:8px;font-size:12px;color:#94a3b8;">
    <span class="site-name">ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ ëª¨ìŒ</span> Â·     <a href="https://tests.mahalohana-bruce.com" style="color:#94a3b8;text-decoration:none;">tests.mahalohana-bruce.com</a>
  </div>
  <div class="copyright" style="margin-top:4px;font-size:12px;color:#94a3b8;">
    Â© 2025 Tests Mahalohana Bruce. All rights reserved.
  </div>
</footer>

<script>
// ========== ìœ í‹¸(ëŒ€ì¹­í˜• ì‹œë“œ) ==========
function normalizeName(s){ return (s||'').trim().replace(/\s+/g,' ').slice(0,16); }
function pairKey(a,b){ // ëŒ€ì¹­ ë³´ì¥: ì´ë¦„ ìˆœì„œë¥¼ ë°”ê¿”ë„ ë™ì¼
  const x = normalizeName(a).toLowerCase(), y = normalizeName(b).toLowerCase();
  return [x,y].sort().join('|');
}
function todayStr(){ const d=new Date(); return d.toISOString().slice(0,10); }

// ê°„ë‹¨í•˜ê³  ì•ˆì •ì ì¸ í•´ì‹œ â†’ í¼ì„¼íŠ¸ ë³€í™˜
function simpleHash(str) {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    const char = str.charCodeAt(i);
    hash = ((hash << 5) - hash) + char;
    hash = hash & hash; // 32bit int ë³€í™˜
  }
  return Math.abs(hash);
}

function seededPercent(seedStr){
  const hash = simpleHash(seedStr);
  return hash % 101; // 0~100
}

// ë°”ì´ëŸ´í•œ íƒ€ì…/ì½”ë©˜íŠ¸
const TYPES = [
  {range:[95,100], name:"ìš´ëª…ì˜ ë°˜ìª½", emoji:"ğŸ’«", comments:[
    "í•˜... ì´ê±´ ì§„ì§œ ìš´ëª…ì´ë‹¤ ğŸ’« í‰ìƒ ëª» ë†“ì•„", "ì‹ ë„ ì¸ì •í•œ ì°°ë–¡ê¶í•©! ë¶€ëª¨ë‹˜ê»˜ ì¸ì‚¬ë“œë ¤ ğŸ‘°", "DNA ìˆ˜ì¤€ì—ì„œ ëŒë¦¬ëŠ” ì¼€ë¯¸... ì´ê±´ ëª» ì°¸ì§€ ğŸ§¬", "ì „ìƒì— ë¶€ë¶€ì˜€ë‚˜ë´„ ã„¹ã…‡ ì†Œë¦„ë‹ëŠ” ì‹±í¬ë¡œìœ¨ ğŸ˜±"
  ]},
  {range:[90,94], name:"ì†Œìš¸ë©”ì´íŠ¸", emoji:"ğŸ’˜", comments:[
    "ì§„ì§œ ì¼€ë¯¸ ë¯¸ì³¤ë‹¤... ë‘˜ì´ ë¶™ìœ¼ë©´ ì‹œê°„ ìˆœì‚­ ğŸ˜", "ì´ëŸ° ì¼€ë¯¸ëŠ” í‰ìƒì— í•œ ë²ˆ! ë¶€ëŸ½ë‹¤ ì§„ì§œ ğŸ¥º", "ì—°ë½ í…œí¬ê¹Œì§€ ì°°ë–¡... ì´ê²Œ ì§„ì§œ ì¸ì—°ì´ì§€ âœ¨", "ê°™ì´ ìˆìœ¼ë©´ ì„¸ìƒì´ ë‹¤ ë‚´ ê²ƒ ê°™ìŒ ğŸŒğŸ’•"
  ]},
  {range:[80,89], name:"ë¶ˆê½ƒ ì¼€ë¯¸", emoji:"ğŸ”¥", comments:[
    "ì´ ì •ë„ë©´ ì§„ì§œ í™”ëˆí•˜ì§€ ğŸ”¥ ì‹¸ì›Œë„ ê¸ˆë°© í™”í•´", "ì—ë„ˆì§€ ë¯¸ì³¤ë„¤ìš” ğŸ’¥ í•¨ê»˜ ìˆìœ¼ë©´ í–‰ë³µ ê³¼ëª°ì…!", "ì´ëŸ° ì¼€ë¯¸ ì–´ë–»ê²Œ ì°¸ì§€? ì§„ì§œ ë¶€ëŸ½ë‹¤ ğŸ˜¤", "ë§¤ì¼ì´ ì„¤ë ˜... ì‹¬ì¥ í„°ì§ˆ ê²ƒ ê°™ì•„ ğŸ’“"
  ]},
  {range:[70,79], name:"ê¿€ë–¨ì–´ì§€ëŠ” ì‚¬ì´", emoji:"ğŸ¯", comments:[
    "ë‹¬ë‹¬í•¨ MAX! ì£¼ë³€ ì‚¬ëŒë“¤ ë‹¹ë‡¨ ê±¸ë¦¬ê² ì–´ ğŸ¯", "ì´ì •ë„ë©´ ê³µì‹ ì»¤í”Œ ì¸ì •! SNS í”„ì‚¬ ë°”ê¿” ğŸ“¸", "í•¨ê»˜ ìˆìœ¼ë©´ ì„¸ìƒì´ í•‘í¬ë¹› í•„í„° ON ğŸŒ¸", "ë°ì´íŠ¸ ì½”ìŠ¤ ë­˜ í•´ë„ ì¬ë°Œê² ë‹¤ ì§„ì§œ ğŸ¡"
  ]},
  {range:[60,69], name:"í‹°í‚¤íƒ€ì¹´", emoji:"ğŸ¯", comments:[
    "ëŒ€í™” í•‘íì´ ì¢‹ìŒ ğŸ“ ë¨¹ì„ ë•Œë„ í•© ë§ê³ !", "ì„œë¡œ í…ì…˜ ë§ìœ¼ë©´ ì™„ë²½í•œ ì¼€ë¯¸ âœ¨", "ì´ ì¡°í•© ì˜ì™¸ë¡œ ê´œì°®ë„¤? ê³„ì† ë³´ê³ ì‹¶ì–´ ğŸ˜Š", "ë“œë¦½ ì£¼ê³ ë°›ê¸° ì°°ë–¡... ê°œê·¸ ì½¤ë¹„ ê°€ëŠ¥ ğŸª"
  ]},
  {range:[50,59], name:"ì¸íƒ€ê¸° ë”± ì¢‹ìŒ", emoji:"ğŸ’­", comments:[
    "ë°€ë‹¹ì˜ ì •ì„! ì¸ íƒ€ë©´ì„œ ì•Œì•„ê°€ëŠ” ì¬ë¯¸ ğŸ’­", "ì„¤ë ˆëŠ” ë§ˆìŒ 70% + ê¶ê¸ˆí•¨ 30% = ì™„ë²½ ğŸ¯", "ì¹´í†¡ 1ì¼ 1ë‹µ... ê·¸ë˜ë„ ê¸°ë‹¤ë ¤ì§€ëŠ” ì‚¬ì´ ğŸ“±", "ì¹œêµ¬ì¸ì§€ ì¸ì¸ì§€ ì• ë§¤í•œ ê·¸ ëŠë‚Œ ì•„ì‹œì£ ? ğŸ˜"
  ]},
  {range:[40,49], name:"ì¹œêµ¬ê°€ ìµœê³ ", emoji:"ğŸ¤", comments:[
    "ì‚¬ëŒ ì¢‹ê³  í¸ì•ˆí•´ ğŸ¤— ì¹œêµ¬ë¡œëŠ” ì°°ë–¡!", "ì¸ì—…ì€ ì²œì²œíˆ... ìš°ì •ë¶€í„° ê¹Šê²Œ ê°€ì", "ì´ëŸ° ì‚¬ëŒ ê³ì— ë‘ê³  ì‹¶ë‹¤ ì§„ì§œ ğŸ’«", "ìˆ  í•œì”í•˜ë©´ì„œ ì¸ìƒ ì–˜ê¸°í•˜ê¸° ë”± ì¢‹ìŒ ğŸº"
  ]},
  {range:[30,39], name:"ê·¹ê³¼ ê·¹", emoji:"âš–ï¸", comments:[
    "ì •ë°˜ëŒ€ì¸ë° ê·¸ê²Œ ë˜ ë§¤ë ¥ì´ì•¼ âš–ï¸", "ì·¨í–¥ ë‹¤ë¥¸ ê²Œ ì˜¤íˆë ¤ ì‹ ì„ í•˜ë„¤?", "ì„œë¡œ ë‹¤ë¥¸ ê²Œ ë§¤ë ¥... ê· í˜•ë§Œ ë§ì¶”ë©´ OK! ğŸ­", "Nê·¹ê³¼ Sê·¹... ëŒë¦¬ê¸´ í•˜ëŠ”ë° í˜ë“¤ ë“¯? ğŸ§²"
  ]},
  {range:[20,29], name:"ë…¸ë ¥ì´ í•„ìš”í•´", emoji:"ğŸ—ï¸", comments:[
    "ê´€ê³„ë„ ê±´ì„¤ì´ì•¼... ì°¨ê·¼ì°¨ê·¼ ìŒ“ì•„ê°€ì ğŸ—ï¸", "ì§€ê¸ˆì€ ì–´ìƒ‰í•´ë„ ì‹œê°„ì´ í•´ê²°í•´ì¤„ê±°ì•¼ â°", "ì²«ì¸ìƒì€ ê·¸ì € ê·¸ëŸ°ë°... ë§¤ë ¥ ìˆì„ì§€ë„? ğŸ¤·", "í•œ ë‹¬ë§Œ ë” ì•Œì•„ë³´ê³  ê²°ì •í•˜ì... ğŸ—“ï¸"
  ]},
  {range:[10,19], name:"ëƒ‰ì˜¨íƒ•", emoji:"ğŸ§ŠğŸ”¥", comments:[
    "ë¡¤ëŸ¬ì½”ìŠ¤í„° ê°™ì€ ì¼€ë¯¸ ğŸ¢ ì¢‹ì„ ë• ë¯¸ì³!", "ê°ì • ìŠ¤ìœ„ì¹˜ ì¡°ì ˆ í•„ìš”... í˜ë“¤ê¸´ í•˜ì§€ë§Œ", "ê¸°ëŒ€ì¹˜ ë‚®ì¶”ê³  ì‹œì‘í•˜ë©´ ì˜ì™¸ì˜ ë°œê²¬ ìˆì„ê±¸? ğŸ¤”", "3ì¼ ì¢‹ê³  3ì¼ ì‹¸ìš°ê³ ... ê·¸ë˜ë„ ì •ë“¤ë©´? ğŸ˜…"
  ]},
  {range:[5,9], name:"í˜„ì‹¤ ì²´í¬ í•„ìš”", emoji:"ğŸš¨", comments:[
    "ì•¼... ì´ê±´ ì¢€ ë‹¤ì‹œ ìƒê°í•´ë´ ğŸš¨", "ì¹œêµ¬ë“¤ì´ ë§ë¦´ í™•ë¥  99.9% ğŸ“Š", "ì°¨ë¼ë¦¬ í˜¼ìê°€ ë‚˜ì„ì§€ë„... ì§„ì‹¬ ì¶©ê³ ì•¼ ğŸ’”", "ì´ ì¼€ë¯¸ë¡œ ì—°ì• í•˜ë©´ ìŠ¤íŠ¸ë ˆìŠ¤ MAX ë³´ì¥ ğŸ˜°"
  ]},
  {range:[0,4], name:"ì›ƒí”ˆ ë“œë¼ë§ˆ", emoji:"ğŸ­", comments:[
    "ë°ˆ ì†Œì¬ë¡œëŠ” ì™„ë²½ ğŸ˜‚ ì¶”ì–µìœ¼ë¡œ ë´‰ì¸ê°!", "ì´ ì¡°í•©... ë“œë¦½ì¹˜ê¸°ì—” ì¢‹ì€ë° í˜„ì‹¤ì€...", "ê·¸ëƒ¥ ì›ƒìœ¼ë©´ì„œ ì§€ë‚˜ê°€ì ã…‹ã…‹ ì¸ìƒ ë­ìˆì–´ ğŸ­", "ìš°ì • íŒŒê´´ ê²Œì„ë³´ë‹¤ ìœ„í—˜í•œ ì¼€ë¯¸... RIP ğŸª¦"
  ]}
];
function pickType(score){
  for(const t of TYPES){ if(score>=t.range[0] && score<=t.range[1]) return t; }
  return TYPES[TYPES.length-1];
}
function randFrom(arr, seedExtra=""){
  const r = seededPercent(seedExtra + JSON.stringify(arr)) / 100; // 0~1
  return arr[Math.floor(r*arr.length)];
}

// ========== ì¸ì‚¬ì´íŠ¸ ë°ì´í„° ==========
const INSIGHTS = {
  chemistryTips: {
    95: ["ì™„ë²½í•œ í˜¸í¡! ì„œë¡œì˜ ë§ì„ ëê¹Œì§€ ë“£ì§€ ì•Šì•„ë„ í†µí•´ìš”", "ê°™ì€ ê²ƒì— ì›ƒê³ , ê°™ì€ ê²ƒì— í™”ë‚´ëŠ” ì‹ ë¹„í•œ ì¼€ë¯¸"],
    90: ["ëŒ€í™”ê°€ ëŠê¸°ì§€ ì•ŠëŠ” ë§ˆë²• ê°™ì€ ì‚¬ì´", "ì„œë¡œì˜ ë‹¨ì ë§ˆì € ê·€ì—½ê²Œ ë³´ì´ëŠ” íŠ¹ë³„í•¨"],
    80: ["ì—ë„ˆì§€ê°€ ë¹„ìŠ·í•´ì„œ í•¨ê»˜ ìˆìœ¼ë©´ ì‹œë„ˆì§€ í­ë°œ!", "ì„œë¡œë¥¼ ë³´ì™„í•˜ë©° ë” ë‚˜ì€ ì‚¬ëŒì´ ë˜ê²Œ í•´ì¤˜ìš”"],
    70: ["ë‹¬ë‹¬í•œ ë¡œë§¨ìŠ¤ì˜ ì •ì„! ì£¼ë³€ì´ ë¶€ëŸ¬ì›Œí•˜ëŠ” ì¼€ë¯¸", "ì†Œì†Œí•œ ì¼ìƒë„ íŠ¹ë³„í•˜ê²Œ ë§Œë“œëŠ” ë§ˆë²•"],
    60: ["ëŒ€í™” ìŠ¤íƒ€ì¼ì´ ì˜ ë§ì•„ì„œ í¸ì•ˆí•œ ê´€ê³„", "ì„œë¡œì˜ ìœ ë¨¸ ì½”ë“œê°€ í†µí•˜ëŠ” ì¦ê±°ìš´ ì‚¬ì´"],
    50: ["ì²œì²œíˆ ì•Œì•„ê°€ëŠ” ì¬ë¯¸ê°€ ìˆëŠ” ê´€ê³„", "ì²«ì¸ìƒê³¼ ë‹¤ë¥¸ ë§¤ë ¥ì„ ë°œê²¬í•˜ê²Œ ë  ê±°ì˜ˆìš”"],
    40: ["í¸ì•ˆí•˜ê³  ì•ˆì •ì ì¸ ìš°ì •ì˜ í† ëŒ€ê°€ íƒ„íƒ„í•´ìš”", "ì„œë¡œë¥¼ ì´í•´í•˜ë ¤ëŠ” ë…¸ë ¥ì´ ë¹›ë‚˜ëŠ” ê´€ê³„"],
    30: ["ë‹¤ë¦„ì´ ì˜¤íˆë ¤ ìƒˆë¡œìš´ ìê·¹ì´ ë˜ëŠ” ì‚¬ì´", "ì„œë¡œ ë‹¤ë¥¸ ê´€ì ìœ¼ë¡œ ì„¸ìƒì„ ë” ë„“ê²Œ ë³¼ ìˆ˜ ìˆì–´ìš”"],
    20: ["ì‹œê°„ê³¼ ë…¸ë ¥ì´ í•„ìš”í•˜ì§€ë§Œ ê°€ëŠ¥ì„±ì€ ì¶©ë¶„í•´ìš”", "ì¸ë‚´ì‹¬ì„ ê°–ê³  ì„œì„œíˆ ë‹¤ê°€ê°€ë©´ ì¢‹ì„ ë“¯"],
    10: ["ê°ì •ì˜ ê¸°ë³µì´ í´ ìˆ˜ ìˆì§€ë§Œ ê·¸ê²ƒë„ ì¶”ì–µ", "ì„œë¡œ ë‹¤ë¥¸ ì—ë„ˆì§€ì§€ë§Œ ê· í˜•ì„ ì°¾ìœ¼ë©´ OK"],
    0: ["ì´ ê²½í—˜ë„ ì†Œì¤‘í•œ ì¸ìƒì˜ í•œ í˜ì´ì§€ì˜ˆìš”", "ë•Œë¡œëŠ” ì›ƒìœ¼ë©° ë„˜ê¸¸ ìˆ˜ ìˆëŠ” ê´€ê³„ë„ í•„ìš”í•´ìš”"]
  },
  relationshipTips: {
    95: ["ì§€ê¸ˆì²˜ëŸ¼ë§Œ í•´ì£¼ì„¸ìš”! ì™„ë²½í•œ ì¼€ë¯¸ë‹ˆê¹Œ", "ì„œë¡œì˜ íŠ¹ë³„í•¨ì„ ê³„ì† ì¸ì •í•´ì£¼ì„¸ìš”"],
    90: ["ì†Œì†Œí•œ ê¹œì§ ì„ ë¬¼ë¡œ ë” íŠ¹ë³„í•˜ê²Œ!", "í•¨ê»˜í•˜ëŠ” ì‹œê°„ì„ ë” ë§ì´ ë§Œë“¤ì–´ë³´ì„¸ìš”"],
    80: ["í™œë°œí•œ ëŒ€í™”ì™€ ë‹¤ì–‘í•œ ê²½í—˜ì„ í•¨ê»˜í•´ìš”", "ì„œë¡œì˜ ì—ë„ˆì§€ë¥¼ ë¶ë‹ì›Œì£¼ëŠ” ê´€ê³„ ìœ ì§€"],
    70: ["ë‹¬ì½¤í•œ ë§ê³¼ ìŠ¤í‚¨ì‹­ìœ¼ë¡œ ë” ê°€ê¹Œì›Œì ¸ìš”", "ë¡œë§¨í‹±í•œ ë°ì´íŠ¸ ì½”ìŠ¤ë¥¼ ê°œë°œí•´ë³´ì„¸ìš”"],
    60: ["ê³µí†µ ê´€ì‹¬ì‚¬ë¥¼ ë” ë§ì´ ì°¾ì•„ë³´ì„¸ìš”", "ì„œë¡œì˜ ì·¨ë¯¸ë¥¼ ì¡´ì¤‘í•˜ê³  ì´í•´í•˜ë ¤ ë…¸ë ¥í•´ìš”"],
    50: ["ì²œì²œíˆ, ë¶€ë‹´ ì—†ì´ ì‹œê°„ì„ ë³´ë‚´ë³´ì„¸ìš”", "ì„œë¡œì— ëŒ€í•´ ë” ë§ì´ ì•Œì•„ê°€ëŠ” ì‹œê°„ì„ ê°€ì ¸ìš”"],
    40: ["ìš°ì •ì„ ë¨¼ì € íƒ„íƒ„íˆ ìŒ“ì•„ê°€ì„¸ìš”", "í¸ì•ˆí•œ ëŒ€í™”ë¡œ ì„œë¡œë¥¼ ë” ê¹Šì´ ì´í•´í•´ìš”"],
    30: ["ì„œë¡œì˜ ë‹¤ë¦„ì„ ì¸ì •í•˜ê³  ì¡´ì¤‘í•´ìš”", "ìƒˆë¡œìš´ ì‹œê°ìœ¼ë¡œ ì„œë¡œë¥¼ ë°”ë¼ë³´ë ¤ ë…¸ë ¥í•´ìš”"],
    20: ["ì¶©ë¶„í•œ ì‹œê°„ì„ ê°–ê³  ì°¨ê·¼ì°¨ê·¼ ë‹¤ê°€ê°€ì„¸ìš”", "ê¸‰í•˜ì§€ ì•Šê²Œ, ìì—°ìŠ¤ëŸ½ê²Œ ê´€ê³„ë¥¼ ë°œì „ì‹œì¼œìš”"],
    10: ["ê°ì • ì¡°ì ˆì— ì‹ ê²½ì“°ë©° ì†Œí†µí•´ë³´ì„¸ìš”", "ì„œë¡œì˜ ì°¨ì´ì ì„ ë°›ì•„ë“¤ì´ëŠ” ì—°ìŠµì´ í•„ìš”í•´ìš”"],
    0: ["ê°€ë²¼ìš´ ì¹œêµ¬ ê´€ê³„ë¡œ ì‹œì‘í•´ë³´ëŠ” ê²ƒë„ ì¢‹ì•„ìš”", "ì„œë¡œì—ê²Œ ë¶€ë‹´ì´ ë˜ì§€ ì•ŠëŠ” ì„ ì—ì„œ ë§Œë‚˜ìš”"]
  },
  specialMessages: {
    95: "ë‘ ì‚¬ëŒì€ ì •ë§ íŠ¹ë³„í•œ ì¸ì—°ì´ì—ìš”. ì´ëŸ° ì¼€ë¯¸ëŠ” ì •ë§ ë“œë¬¼ê±°ë“ ìš”! ğŸ’«",
    90: "ë§ˆì¹˜ í¼ì¦ ì¡°ê°ì´ ë”± ë§ì¶°ì§€ëŠ” ê²ƒì²˜ëŸ¼, ì„œë¡œì—ê²Œ ì™„ë²½í•œ ìƒëŒ€ì˜ˆìš” âœ¨",
    80: "í•¨ê»˜ ìˆìœ¼ë©´ ì„¸ìƒì´ ë” ë°ì•„ ë³´ì´ëŠ” ê·¸ëŸ° ì‚¬ì´ë„¤ìš”! ğŸŒŸ",
    70: "ë‹¬ë‹¬í•œ ë¡œë§¨ìŠ¤ ì˜í™”ì˜ ì£¼ì¸ê³µ ê°™ì€ ë‘ ì‚¬ëŒì´ì—ìš” ğŸ’•",
    60: "í¸ì•ˆí•˜ë©´ì„œë„ ì¬ë¯¸ìˆëŠ”, ì´ìƒì ì¸ ê´€ê³„ì˜ ëª¨ìŠµì´ì—ìš” ğŸ˜Š",
    50: "ì²œì²œíˆ ì•Œì•„ê°€ëŠ” ì¬ë¯¸ê°€ ìˆëŠ” ë‘ ì‚¬ëŒ! ê¸°ëŒ€ë˜ë„¤ìš” ğŸ¯",
    40: "ì¢‹ì€ ì¹œêµ¬ê°€ ë  ìˆ˜ ìˆëŠ” ë“ ë“ í•œ ì¼€ë¯¸ë¥¼ ê°€ì§€ê³  ìˆì–´ìš” ğŸ¤",
    30: "ì„œë¡œ ë‹¤ë¥¸ ë§¤ë ¥ìœ¼ë¡œ ìƒˆë¡œìš´ ìê·¹ì„ ì£¼ëŠ” ê´€ê³„ì˜ˆìš” ğŸ­",
    20: "ì‹œê°„ì´ íë¥´ë©´ì„œ ë” ì¢‹ì•„ì§ˆ ìˆ˜ ìˆëŠ” ê°€ëŠ¥ì„±ì´ ë³´ì—¬ìš” ğŸŒ±",
    10: "ë•Œë¡œëŠ” ì´ëŸ° ë¡¤ëŸ¬ì½”ìŠ¤í„° ê°™ì€ ê´€ê³„ë„ ì¶”ì–µì´ ë˜ì£  ğŸ¢",
    0: "ì´ê²ƒë„ í•˜ë‚˜ì˜ ê²½í—˜! ì¸ìƒì€ ë‹¤ì–‘í•œ ë§Œë‚¨ìœ¼ë¡œ í’ë¶€í•´ì ¸ìš” ğŸª"
  }
};

function getInsightForScore(category, score) {
  const bucket = INSIGHTS[category];
  const keys = Object.keys(bucket).map(Number).sort((a,b) => b-a);
  for (const key of keys) {
    if (score >= key) {
      const val = bucket[key];
      return Array.isArray(val) ? randFrom(val, category + score) : val;
    }
  }
  const fallback = bucket[0];
  return Array.isArray(fallback) ? randFrom(fallback, category + score) : fallback;
}

function renderInsights(res) {
  els.chemistryTips.textContent = getInsightForScore('chemistryTips', res.score);
  els.relationshipTips.textContent = getInsightForScore('relationshipTips', res.score);
  els.specialMessage.textContent = getInsightForScore('specialMessages', res.score);
}

// ========== ê²°ê³¼ ë Œë” ==========
const els = {
  a: document.getElementById('a'),
  b: document.getElementById('b'),
  go: document.getElementById('go'),
  result: document.getElementById('result'),
  title: document.getElementById('title'),
  score: document.getElementById('score'),
  type: document.getElementById('type'),
  comment: document.getElementById('comment'),
  copy: document.getElementById('copy'),
  save: document.getElementById('save'),
  shareLine: document.getElementById('shareLine'),
  shareX: document.getElementById('shareX'),
  shareFb: document.getElementById('shareFb'),
  again: document.getElementById('again'),
  testCount: document.getElementById('testCount'),
  canvas: document.getElementById('card'),
  chemistryTips: document.getElementById('chemistryTips'),
  relationshipTips: document.getElementById('relationshipTips'),
  specialMessage: document.getElementById('specialMessage'),
};

function toast(msg, type='info'){
  const t=document.createElement('div'); 
  t.className=`toast ${type}`; 
  t.textContent=msg; 
  document.body.appendChild(t);
  setTimeout(()=>t.remove(), type==='error' ? 3000 : 1500);
}

function compute(a,b){
  try {
    a=normalizeName(a); b=normalizeName(b);
    if(!a || !b){ 
      toast('ì´ë¦„ì„ ë‘˜ ë‹¤ ì…ë ¥í•´ì£¼ì„¸ìš”! ğŸ’•', 'error'); 
      return null; 
    }
    if(a.length < 2 || b.length < 2){
      toast('ì´ë¦„ì„ ìµœì†Œ 2ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”! âœï¸', 'error');
      return null;
    }
    if(a === b){
      toast('ê°™ì€ ì´ë¦„ìœ¼ë¡œëŠ” í…ŒìŠ¤íŠ¸í•  ìˆ˜ ì—†ì–´ìš”! ğŸ˜…', 'error');
      return null;
    }
    // ì˜¤ëŠ˜ì˜ ìš´ëª… ëª¨ë“œë¡œ ê³ ì •
    const seed = pairKey(a,b) + '|' + todayStr();
    const score = seededPercent(seed);
    const t = pickType(score);
    const cmt = randFrom(t.comments, seed);
    return {a,b,score,type:t,comment:cmt,seed};
  } catch(error) {
    console.error('ê³„ì‚° ì˜¤ë¥˜:', error);
    toast('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”! ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš” ğŸ”„', 'error');
    return null;
  }
}

function render(res){
  const names = `${res.a} â¤ ${res.b}`;
  els.title.textContent = names;
  els.score.textContent = `${res.score}%`;
  els.type.textContent  = `${res.type.name} ${res.type.emoji}`;
  els.comment.textContent = res.comment;
  els.result.classList.remove('hidden');
  
  // ì¶”ê°€ ì¸ì‚¬ì´íŠ¸ ë Œë”ë§
  renderInsights(res);

  // í…ŒìŠ¤íŠ¸ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
  const count = parseInt(localStorage.getItem('testCount') || '0') + 1;
  localStorage.setItem('testCount', count.toString());
  els.testCount.textContent = count;

  // ê³µìœ  URL
  const base = location.origin + location.pathname.replace(/index\.html?$/,'');
  const u = `${base}?a=${encodeURIComponent(res.a)}&b=${encodeURIComponent(res.b)}&utm_source=share&utm_medium=button`;
  setupShare(u, `${res.a}â¤${res.b} ì¼€ë¯¸ ${res.score}% Â· ${res.type.name}`);

  // ì¹´ë“œ ê·¸ë¦¬ê¸°
  drawCard(res);
  
  // ê²°ê³¼ë¡œ ìŠ¤í¬ë¡¤
  els.result.scrollIntoView({ behavior: 'smooth' });
}

// íˆìŠ¤í† ë¦¬ ê¸°ëŠ¥ ì œê±°ë¨

// ========== ìº”ë²„ìŠ¤ ì¹´ë“œ ==========
function drawCard(res){
  const c=els.canvas, ctx=c.getContext('2d');
  // ë°°ê²½ ê·¸ë¼ë°ì´ì…˜ (ë°ì€ íŒŒìŠ¤í…”)
  const g=ctx.createLinearGradient(0,0,1080,1350);
  g.addColorStop(0, '#FAFBFF'); g.addColorStop(1, '#FEF7FF');
  ctx.fillStyle=g; ctx.fillRect(0,0,1080,1350);
  // í° íŒ¨ë„
  ctx.fillStyle='#ffffff';
  roundRect(ctx, 60, 140, 960, 1070, 36, true);
  // ì œëª©
  ctx.fillStyle='#1E293B'; ctx.font='900 64px "Noto Sans KR", system-ui';
  wrapText(ctx, `${res.a} â¤ ${res.b}`, 90, 260, 900, 72);
  // ì„œë¸Œ (íƒ€ì…)
  ctx.fillStyle='#64748B'; ctx.font='800 40px "Noto Sans KR", system-ui';
  wrapText(ctx, `${res.type.name} ${res.type.emoji}`, 90, 350, 900, 52);
  // í¼ì„¼íŠ¸
  const grad = ctx.createLinearGradient(90,0,700,0);
  grad.addColorStop(0,'#E11D48'); grad.addColorStop(1,'#7C3AED');
  ctx.fillStyle=grad; ctx.font='900 120px "Noto Sans KR", system-ui';
  ctx.fillText(`${res.score}%`, 90, 500);
  // ì½”ë©˜íŠ¸
  ctx.fillStyle='#374151'; ctx.font='600 36px "Noto Sans KR", system-ui';
  wrapText(ctx, res.comment, 90, 580, 900, 48);
  // ê²Œì´ì§€
  drawGauge(ctx, 90, 760, 900, 40, res.score/100);
  // í‘¸í„°
  ctx.fillStyle='#64748b'; ctx.font='600 28px "Noto Sans KR", system-ui';
  ctx.fillText(new Date().toISOString().slice(0,10) + ' Â· tests.mahalohana-bruce.com', 90, 1158);
}

function drawGauge(ctx, x,y,w,h,pct){
  ctx.fillStyle='rgba(225,29,72,.08)';
  roundRect(ctx, x,y,w,h, h/2, true);
  const grad = ctx.createLinearGradient(x,0,x+w,0);
  grad.addColorStop(0,'#E11D48'); grad.addColorStop(1,'#7C3AED');
  ctx.fillStyle=grad;
  roundRect(ctx, x,y,Math.max(h, w*pct),h, h/2, true);
}

function savePng(){
  const link = document.createElement('a');
  link.download='compat-card.png';
  link.href = els.canvas.toDataURL('image/png');
  link.click();
}

function roundRect(ctx,x,y,w,h,r,fill){
  ctx.beginPath();
  ctx.moveTo(x+r,y);
  ctx.arcTo(x+w,y,x+w,y+h,r);
  ctx.arcTo(x+w,y+h,x,y+h,r);
  ctx.arcTo(x,y+h,x,y,r);
  ctx.arcTo(x,y,x+w,y,r);
  ctx.closePath();
  if(fill) ctx.fill();
}
function wrapText(ctx, text, x, y, maxWidth, lineHeight){
  const words = (text||'').split(' ');
  let line='', yy=y;
  for(let i=0;i<words.length;i++){
    const test=line+words[i]+' ';
    if(ctx.measureText(test).width>maxWidth && i>0){ ctx.fillText(line, x, yy); line=words[i]+' '; yy+=lineHeight; }
    else line=test;
  }
  ctx.fillText(line, x, yy);
}

// ========== ê³µìœ  ==========
function setupShare(url, title){
  const txt = encodeURIComponent(title);
  const u   = encodeURIComponent(url);
  els.shareLine.href = `https://line.me/R/msg/text/?${txt}%0A${u}`;
  els.shareX.href    = `https://twitter.com/intent/tweet?text=${txt}&url=${u}`;
  els.shareFb.href   = `https://www.facebook.com/sharer/sharer.php?u=${u}`;
  
  // ê³µìœ  ë²„íŠ¼ ì´ë²¤íŠ¸ ì¶”ê°€
  els.shareLine.onclick = () => { 
    if(typeof gtag !== 'undefined') gtag('event', 'share', {method: 'line'});
  };
  els.shareX.onclick = () => {
    if(typeof gtag !== 'undefined') gtag('event', 'share', {method: 'twitter'});
  };
  els.shareFb.onclick = () => {
    if(typeof gtag !== 'undefined') gtag('event', 'share', {method: 'facebook'});
  };
  
  els.copy.onclick = async ()=>{ 
    try{ 
      await navigator.clipboard.writeText(url); 
      toast('ë§í¬ë¥¼ ë³µì‚¬í–ˆì–´ìš”!', 'success'); 
      if(typeof gtag !== 'undefined') gtag('event', 'share', {method: 'copy_link'});
    }catch(e){ 
      alert(url); 
    } 
  };
  els.save.onclick = () => {
    savePng();
    if(typeof gtag !== 'undefined') gtag('event', 'download_result_card');
  };
}

// ========== ì´ë²¤íŠ¸ ==========
els.again.onclick = ()=>{ 
  els.a.value = ''; els.b.value = '';
  els.result.classList.add('hidden');
  els.a.focus();
  window.scrollTo({ top: 0, behavior: 'smooth' });
};

els.go.onclick = async ()=>{
  const btn = els.go;
  if(btn.classList.contains('loading')) return;
  
  try {
    // ë¡œë”© ì‹œì‘
    btn.classList.add('loading');
    btn.disabled = true;
    const originalText = btn.textContent;
    btn.textContent = 'ì¼€ë¯¸ ë¶„ì„ ì¤‘...';
    
    // ìµœì†Œ ë¡œë”© ì‹œê°„ (UX)
    await new Promise(resolve => setTimeout(resolve, 800));
    
    const res = compute(els.a.value, els.b.value);
    if(!res) return;
    
    render(res);
    toast('âœ¨ ì¼€ë¯¸ ë¶„ì„ ì™„ë£Œ!', 'success');
    
    // GA ì´ë²¤íŠ¸ ì¶”ì 
    if(typeof gtag !== 'undefined') {
      gtag('event', 'chemistry_test_completed', {
        event_category: 'engagement',
        event_label: `${res.a}-${res.b}`,
        chemistry_score: res.score,
        chemistry_type: res.type.name
      });
    }
    
  } catch(error) {
    console.error('í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì˜¤ë¥˜:', error);
    toast('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”! í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš” ğŸ”„', 'error');
  } finally {
    // ë¡œë”© ì¢…ë£Œ
    btn.classList.remove('loading');
    btn.disabled = false;
    btn.textContent = 'ğŸ”® ì§€ê¸ˆ ìš´ëª… í™•ì¸í•˜ê¸°! ğŸ”®';
  }
};

// ì—”í„°í‚¤ ì§€ì›
[els.a, els.b].forEach(input => {
  input.addEventListener('keypress', (e) => {
    if(e.key === 'Enter') els.go.click();
  });
});

// ì¿¼ë¦¬ë¡œ ì§„ì… ì‹œ ìë™ ë Œë” (?a=..&b=..)
(function preload(){
  const p = new URLSearchParams(location.search);
  const a = p.get('a')||''; const b = p.get('b')||'';
  if(a&&b){ els.a.value=a; els.b.value=b; const r=compute(a,b); if(r) render(r); }
  
  // í…ŒìŠ¤íŠ¸ ì¹´ìš´íŠ¸ ì´ˆê¸°í™”
  const count = localStorage.getItem('testCount') || '0';
  els.testCount.textContent = count;
})();
</script>
<script defer src="/assets/analytics-enhanced.js"></script>
</body>
</html>
